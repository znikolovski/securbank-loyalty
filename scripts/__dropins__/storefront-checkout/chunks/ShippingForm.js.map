{"version":3,"file":"ShippingForm.js","sources":["../../src/containers/ShippingForm/ShippingForm.tsx"],"sourcesContent":["import {\n  prepareAddress,\n  setBillingAddress,\n  setShippingAddress,\n} from '@/checkout/api';\nimport  { AddressForm, SaveAddressCommand } from '@/checkout/components/AddressForm';\nimport { SHIPPING_FORM_NAME } from '@/checkout/containers/ShippingForm';\nimport { Container } from '@adobe/elsie/lib';\nimport { HTMLAttributes, useCallback } from 'preact/compat';\nimport { PreselectedAddressFields } from '@/checkout/containers';\nimport { cartSignal, isBillToShippingSignal } from '@/checkout/signals';\nimport { AddressFormType } from '@/checkout/data/models';\n\nexport interface ShippingFormProps extends HTMLAttributes<HTMLDivElement> {\n  preselectedFields?: PreselectedAddressFields;\n}\n\nexport const ShippingForm: Container<ShippingFormProps> = ({\n  preselectedFields,\n  ...props\n}) => {\n  const { data: CartData } = cartSignal.value;\n  const cartId = CartData?.id || '';\n  const isBillToShipping = isBillToShippingSignal.value.checked;\n\n  const saveAddressHandler = useCallback(\n    (command: SaveAddressCommand) => {\n      return setShippingAddress({\n        signal: command.signal,\n        cartId,\n        address: prepareAddress(command.address),\n      }).then(() => {\n        if (isBillToShipping) {\n          return setBillingAddress({\n            cartId,\n            input: { same_as_shipping: true },\n          });\n        }\n      });\n    },\n    [cartId, isBillToShipping]\n  );\n\n  return (\n    <AddressForm\n      {...props}\n      addressType={AddressFormType.SHIPPING}\n      headingId=\"Checkout.ShippingAddress.title\"\n      name={SHIPPING_FORM_NAME}\n      preselectedFields={preselectedFields}\n      saveAddressHandler={saveAddressHandler}\n    />\n  );\n};\n"],"names":["ShippingForm","preselectedFields","props","data","CartData","cartSignal","value","cartId","id","isBillToShipping","isBillToShippingSignal","checked","saveAddressHandler","useCallback","command","setShippingAddress","signal","address","prepareAddress","then","setBillingAddress","input","same_as_shipping","_jsx","AddressForm","addressType","AddressFormType","SHIPPING","headingId","name","SHIPPING_FORM_NAME"],"mappings":"oeAiBO,MAAMA,EAA6CA,CAAC,CACzDC,kBAAAA,EACA,GAAGC,CACL,IAAM,CACE,KAAA,CAAEC,KAAMC,CAAAA,EAAaC,EAAWC,MAChCC,GAASH,GAAAA,YAAAA,EAAUI,KAAM,GACzBC,EAAmBC,EAAuBJ,MAAMK,QAEhDC,EAAqBC,EACxBC,GACQC,EAAmB,CACxBC,OAAQF,EAAQE,OAChBT,OAAAA,EACAU,QAASC,EAAeJ,EAAQG,OAAO,CAAA,CACxC,EAAEE,KAAK,IAAM,CACZ,GAAIV,EACF,OAAOW,EAAkB,CACvBb,OAAAA,EACAc,MAAO,CAAEC,iBAAkB,EAAK,CAAA,CACjC,CACH,CACD,EAEH,CAACf,EAAQE,CAAgB,CAC3B,EAEA,OACEc,EAACC,EAAW,CAAA,GACNtB,EACJuB,YAAaC,EAAgBC,SAC7BC,UAAU,iCACVC,KAAMC,EACN7B,kBAAAA,EACAW,mBAAAA,CAAAA,CACD,CAEL"}