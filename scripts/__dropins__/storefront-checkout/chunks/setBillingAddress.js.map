{"version":3,"file":"setBillingAddress.js","sources":["../../src/api/setBillingAddress/graphql/setBillingAddress.graphql.ts","../../src/api/setBillingAddress/setBillingAddress.ts"],"sourcesContent":["import {\n  CART_DATA_FRAGMENT,\n  CART_SUMMARY_FRAGMENT,\n} from '@/checkout/api/getCart/graphql/getCart.graphql';\n\nexport const setBillingAddressMutation = /* GraphQL */ `\n  mutation setBillingAddress($cartId: String!, $input: BillingAddressInput!) {\n    setBillingAddressOnCart(\n      input: { cart_id: $cartId, billing_address: $input }\n    ) {\n      cart {\n        id\n        ...CartData\n        ...CartSummaryItems\n      }\n    }\n  }\n  ${CART_DATA_FRAGMENT}\n  ${CART_SUMMARY_FRAGMENT}\n`;\n","import { MissingBillingAddress, MissingCart } from '@/checkout/api/errors';\nimport { setBillingAddressMutation } from '@/checkout/api/setBillingAddress/graphql/setBillingAddress.graphql';\nimport { AddressInput } from '@/checkout/api/setShippingAddress';\nimport { dispatchApiCall } from '@/checkout/api/utils/dispatchApiCall';\nimport { transformCart } from '@/checkout/data/transforms/index';\n\nexport interface BillingAddressInput {\n  address?: AddressInput;\n  customer_address_id?: number;\n  same_as_shipping?: boolean;\n  use_for_shipping?: boolean;\n}\n\nexport const setBillingAddress = async ({\n  signal,\n  cartId,\n  input,\n}: {\n  signal?: AbortSignal;\n  cartId: string;\n  input: BillingAddressInput;\n}) => {\n  const { address, same_as_shipping } = input;\n\n  if (!cartId) throw new MissingCart();\n  if (!same_as_shipping && !address) throw new MissingBillingAddress();\n\n  return await dispatchApiCall({\n    type: 'mutation',\n    query: setBillingAddressMutation,\n    options: { signal, variables: { cartId, input } },\n    path: 'setBillingAddressOnCart.cart',\n    signalType: 'cart',\n    transformer: transformCart,\n  });\n};\n"],"names":["setBillingAddressMutation","CART_DATA_FRAGMENT","CART_SUMMARY_FRAGMENT","setBillingAddress","signal","cartId","input","address","same_as_shipping","MissingCart","MissingBillingAddress","dispatchApiCall","type","query","options","variables","path","signalType","transformer","transformCart"],"mappings":"qJAKaA,MAAAA,EAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAYnDC,CAAkB;AAAA,IAClBC,CAAqB;AAAA,ECLZC,EAAoB,MAAO,CACtCC,OAAAA,EACAC,OAAAA,EACAC,MAAAA,CAKF,IAAM,CACE,KAAA,CAAEC,QAAAA,EAASC,iBAAAA,CAAqBF,EAAAA,EAEtC,GAAI,CAACD,EAAQ,MAAM,IAAII,EACnB,GAAA,CAACD,GAAoB,CAACD,EAAS,MAAM,IAAIG,EAE7C,OAAO,MAAMC,EAAgB,CAC3BC,KAAM,WACNC,MAAOb,EACPc,QAAS,CAAEV,OAAAA,EAAQW,UAAW,CAAEV,OAAAA,EAAQC,MAAAA,CAAM,CAAE,EAChDU,KAAM,+BACNC,WAAY,OACZC,YAAaC,CAAAA,CACd,CACH"}