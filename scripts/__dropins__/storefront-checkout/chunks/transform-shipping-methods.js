import{k as v,f as m,o as f,i as S,l as x,v as _}from"./getStoreConfig.js";import"@dropins/tools/event-bus.js";class w extends Error{constructor(r){super(r.map(t=>t.message).join(" ")),this.name="FetchError"}}class i extends Error{constructor(r){super(r),this.name="InvalidArgument"}}class k extends Error{constructor(r){super(r),this.name="UnexpectedError"}}class B extends i{constructor(){super("Cart ID is required")}}class F extends i{constructor(){super("Email is required")}}class G extends i{constructor(){super("Payment method code is required")}}class Q extends i{constructor(){super("Billing address is required")}}class R extends i{constructor(){super("Country Code is required")}}const C=v({pending:!1,data:void 0}),q=v({pending:!1,data:void 0}),l=[];function A(e){return new Promise((r,t)=>{l.push(e);const s=()=>{l[0]===e?e().then(r).catch(t).finally(()=>l.shift()):setTimeout(s,100)};s()})}const P=["sender_email","recipient_email"];function T(e){return e.filter(r=>!r.path||!P.some(t=>{var s;return((s=r.path)==null?void 0:s.at(-1))===t}))}const b={cart:S,regions:q,estimateShippingMethods:C,customer:x};function I(e,r){return r.split(".").reduce((t,s)=>t&&t[s]!==void 0?t[s]:void 0,e)}const g={cart:null,customer:null,estimateShippingMethods:null,regions:null};async function V(e){const{query:r,options:t,path:s,signalType:u,type:M,transformer:c}=e,n=b[u],d=Symbol();g[u]=d,n.value={...n.value,pending:!0};try{const{data:a,errors:p}=await(M==="mutation"?A(()=>m(r,t).catch(f)):m(r,{method:"GET",cache:"no-cache",...t}).catch(f));if(p){const h=T(p);if(h.length>0)throw new w(h)}let o=I(a,s);if(o===void 0)throw new Error(`No data found at path: ${s}`);return c&&(o=c(o)),n.value={...n.value,data:o},setTimeout(()=>{n.value={...n.value,pending:g[u]===d?!1:n.value.pending}},0),o}catch(a){if(a.name==="AbortError")return;throw n.value={...n.value,pending:!1},a}}const N=(e,r)=>e.amount.value-r.amount.value,y=e=>!(!e||!e.method_code||!e.method_title||_(e.amount.value)||!e.amount.currency),E=e=>({amount:{value:e.amount.value,currency:e.amount.currency},title:e.method_title,code:e.method_code,carrier:{code:e.carrier_code,title:e.carrier_title},value:`${e.carrier_code} - ${e.method_code}`}),j=e=>{if(y(e))return E(e)},D=e=>{if(e)return e.filter(y).map(r=>E(r)).sort(N)};export{w as F,i as I,B as M,k as U,F as a,G as b,Q as c,R as d,V as e,C as f,j as g,q as r,D as t};
//# sourceMappingURL=transform-shipping-methods.js.map
