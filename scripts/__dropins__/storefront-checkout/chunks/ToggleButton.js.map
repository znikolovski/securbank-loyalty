{"version":3,"file":"ToggleButton.js","sources":["../../src/utils/autocompleteFieldCodes/autocompleteFieldCodes.ts","../../src/utils/isEmpty/isEmpty.ts","../../src/utils/processFormFields/processFormFields.ts","../../src/utils/refetchEstimatedShippingMethods/refetchEstimatedShippingMethods.ts","../../src/components/FieldsForm/fieldFactory.tsx","../../src/components/FieldsForm/validation.ts","../../src/components/FieldsForm/FieldsFormSkeleton.tsx","../../src/components/FieldsForm/FieldsForm.tsx","../../node_modules/@adobe/elsie/src/lib/form-values.ts","../../src/components/AddressForm/AddressForm.tsx","../../src/components/AddressForm/useAddressBackup.ts","../../src/hooks/useValidity/useValidity.ts","../../src/components/AddressForm/useAddressForm.ts","../../src/components/AddressForm/usePreselectedFields.ts","../../src/components/AddressForm/utils.ts","../../src/hooks/useBreakpoint/useBreakpoint.ts","../../src/components/Checkout/Checkout.tsx","../../src/components/Heading/Heading.tsx","../../src/hooks/useLockScroll/useLockScroll.ts","../../src/components/OverlayLoader/OverlayLoader.tsx"],"sourcesContent":["export interface fieldCodes {\n  firstname: string;\n  lastname: string;\n  company: string;\n  country: string;\n  region: string;\n  city: string;\n  postcode: string;\n  telephone: string;\n  street: string;\n  email: string;\n  middlename: string;\n  prefix: string;\n  suffix: string;\n}\n\n// HTML attribute: autocomplete\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\n// https://www.w3.org/TR/WCAG21/#input-purposes\nconst autocompleteFieldCodes: fieldCodes = {\n  firstname: 'given-name',\n  lastname: 'family-name',\n  company: 'organization',\n  country: 'country',\n  region: 'address-level1',\n  city: 'address-level2',\n  postcode: 'postal-code',\n  telephone: 'tel',\n  street: 'address-line1',\n  email: 'email',\n  middlename: 'additional-name',\n  prefix: 'honorific-prefix',\n  suffix: 'honorific-suffix',\n};\n\nexport default autocompleteFieldCodes;\n","export function isEmpty(obj: Record<string, any>): boolean {\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}","import { AttributeFrontendInputEnum } from '@/checkout/__generated__/types';\nimport {\n  AddressFormElement,\n  AddressFormErrors,\n  AddressFormField,\n  AddressFormFieldCode,\n  AddressFormType,\n  AddressFormValues,\n  Country,\n  Region,\n  StoreConfig,\n} from '@/checkout/data/models';\nimport { regionsSignal } from '@/checkout/signals';\n\nimport {\n  getMultilineValues,\n  refetchEstimatedShippingMethods,\n} from '@/checkout/utils';\nimport { PickerOption } from '@adobe/elsie/components';\nimport { StateUpdater, Dispatch } from 'preact/hooks';\n\nexport type FormFieldsProcessorProps = {\n  address: AddressFormValues;\n  addressType: AddressFormType;\n  availableCountries: Country[] | undefined;\n  availableRegions: Region[];\n  config: StoreConfig;\n  dismissError: (code: string) => void;\n  errors: AddressFormErrors;\n  fields: AddressFormField[];\n  onBlur: (event: Event) => void;\n  onChange: (event: Event) => void;\n  onInvalid: (event: Event) => void;\n  onSelection: (event: Event) => void;\n  setAddress: Dispatch<StateUpdater<AddressFormValues>>;\n};\n\nconst transformRegionOptions = (regions: Region[]): PickerOption[] => {\n  return regions.map((region) => {\n    const value = region?.id?.toString() || region.code;\n    return { text: region.name, value };\n  });\n};\n\nconst transformCountryOptions = (\n  countries: Country[] | undefined\n): PickerOption[] => {\n  if (!countries) return [];\n\n  return countries.map((country) => ({\n    text: country.label,\n    value: country.value,\n  }));\n};\n\nexport function processFormFields({\n  address,\n  addressType,\n  availableCountries,\n  availableRegions,\n  config,\n  dismissError,\n  errors,\n  fields,\n  onBlur,\n  onChange,\n  onInvalid,\n  onSelection,\n  setAddress,\n}: FormFieldsProcessorProps): AddressFormElement[] {\n  const resetRegion = () => {\n    setAddress((address) => ({\n      ...address,\n      [AddressFormFieldCode.Region]: '',\n      [AddressFormFieldCode.RegionId]: '',\n    }));\n\n    dismissError(AddressFormFieldCode.Region);\n  };\n\n  const syncRegionId = (regionId: string) => {\n    setAddress((address) => ({\n      ...address,\n      [AddressFormFieldCode.RegionId]: regionId,\n    }));\n  };\n\n  return fields.map((field) => {\n    let error: string | string[];\n    let frontendInput = field.frontendInput;\n    let handleSelect;\n    let isDisabled = field.isDisabled;\n    let isRequired = field.isRequired;\n    let options: PickerOption[] = [];\n    let value: string | string[];\n\n    if (frontendInput === AttributeFrontendInputEnum.Multiline) {\n      value = getMultilineValues(field.code, address);\n      error = getMultilineValues(field.code, errors);\n    } else {\n      value = address[field.code];\n      error = errors[field.code] || '';\n    }\n\n    if (field.code === AddressFormFieldCode.Country) {\n      options = transformCountryOptions(availableCountries);\n      if (addressType === AddressFormType.SHIPPING) {\n        regionsSignal.value.country = value as string;\n\n        handleSelect = (event: Event) => {\n          const target = event.target as HTMLInputElement;\n          const { value } = target;\n\n          if (value) {\n            refetchEstimatedShippingMethods({\n              country_code: value,\n            });\n          }\n\n          onSelection(event);\n          resetRegion();\n        };\n      } else {\n        handleSelect = onSelection;\n      }\n    }\n\n    if (field.code === AddressFormFieldCode.RegionId) {\n      if (addressType === AddressFormType.SHIPPING) {\n        regionsSignal.value.selectedRegionId = value as string;\n      }\n    }\n\n    if (field.code === AddressFormFieldCode.Region) {\n      if (addressType === regionsSignal.value.addressType) {\n        isDisabled = regionsSignal.value.pending;\n      }\n\n      isRequired = config!.countriesWithRequiredRegion.includes(\n        address?.country_id\n      );\n      options = transformRegionOptions(availableRegions);\n\n      if (!isRequired && !config!.displayStateIfOptional) {\n        frontendInput = AttributeFrontendInputEnum.Undefined;\n      }\n\n      frontendInput =\n        options.length > 0\n          ? AttributeFrontendInputEnum.Select\n          : AttributeFrontendInputEnum.Text;\n\n      if (frontendInput === AttributeFrontendInputEnum.Select) {\n        if (addressType === AddressFormType.SHIPPING) {\n          regionsSignal.value.selectedRegion = value as string;\n\n          handleSelect = (event: Event) => {\n            const target = event.target as HTMLInputElement;\n            const selectedRegion = target.value;\n\n            refetchEstimatedShippingMethods({\n              country_code: regionsSignal.value.country as string,\n              region_id: selectedRegion,\n            });\n\n            onSelection(event);\n            syncRegionId(selectedRegion);\n          };\n        } else {\n          handleSelect = (event: Event) => {\n            onSelection(event);\n            const target = event.target as HTMLSelectElement;\n            const selectedRegion = target.value;\n            syncRegionId(selectedRegion);\n          };\n        }\n      } else if (frontendInput === AttributeFrontendInputEnum.Text) {\n        if (addressType === AddressFormType.SHIPPING) {\n          regionsSignal.value.selectedRegion = value as string;\n\n          const defaultOnChange = onChange;\n\n          onChange = (event: Event) => {\n            const target = event.target as HTMLInputElement;\n            const { value } = target;\n\n            if (regionsSignal.value.country) {\n              refetchEstimatedShippingMethods({\n                country_code: regionsSignal.value.country as string,\n                region_name: value as string,\n              });\n            }\n\n            defaultOnChange(event);\n          };\n        }\n      }\n\n      value =\n        options.length > 0\n          ? options.find((regionOption) => regionOption!.value === value)\n              ?.value || ''\n          : value;\n    }\n\n    if (field.code === AddressFormFieldCode.PostCode) {\n      isRequired = !config!.countriesWithOptionalZipCode.includes(\n        address?.country_id as string\n      );\n    }\n\n    return {\n      ...field,\n      error,\n      frontendInput,\n      handleSelect,\n      isDisabled,\n      isRequired,\n      onBlur,\n      onChange,\n      onInvalid,\n      options,\n      value,\n    };\n  });\n}\n\nexport type ProcessedFormFields = ReturnType<typeof processFormFields>;\n","import { cartSignal } from '@/checkout/signals';\nimport { DEBOUNCE_TIME } from '@/checkout/components/AddressForm/constants';\nimport { ShippingEstimationCriteria, estimateShippingMethods } from '@/checkout/api';\n\nlet estimateShipppingTimer: ReturnType<typeof setTimeout>;\nexport function refetchEstimatedShippingMethods(\n  criteria: ShippingEstimationCriteria\n) {\n  const cartData = cartSignal.value.data;\n  const hasCartData = !!cartData;\n  const firstAddress = cartData?.shippingAddresses?.[0];\n  const availableShippingMethods = firstAddress?.availableShippingMethods;\n\n  if (hasCartData && !availableShippingMethods) {\n    clearTimeout(estimateShipppingTimer);\n\n    estimateShipppingTimer = setTimeout(() => {\n      estimateShippingMethods({ cartId: cartData.id, criteria });\n    }, DEBOUNCE_TIME);\n  }\n}\n","import { validityProps } from '@/checkout/components/FieldsForm';\nimport { AddressFormElement, AddressFormType } from '@/checkout/data/models';\nimport autocompleteFieldCodes, {\n  fieldCodes,\n} from '@/checkout/utils/autocompleteFieldCodes/autocompleteFieldCodes';\nimport { Field, Input, Picker } from '@adobe/elsie/components';\n\ntype FieldFactoryProps = {\n  addressType: AddressFormType;\n  element: AddressFormElement;\n};\n\nconst generateId = ({\n  addressType,\n  code,\n  index,\n}: {\n  addressType: AddressFormType;\n  code: string;\n  index?: number;\n}) => {\n  return index ? `${addressType}-${code}-${index}` : `${addressType}-${code}`;\n};\n\nconst generateClassName = (code: string) => {\n  return `checkout-address-form__${code}`;\n};\n\nconst hiddenField = ({ addressType, element }: FieldFactoryProps) => {\n  const { code, value, defaultValue } = element;\n\n  return (\n    <input\n      className={generateClassName(code)}\n      id={generateId({ addressType, code })}\n      key={code}\n      name={code}\n      type=\"hidden\"\n      value={value || defaultValue}\n    />\n  );\n};\n\nconst textField = ({ addressType, element }: FieldFactoryProps) => {\n  const {\n    code,\n    error,\n    isDisabled,\n    label,\n    onBlur,\n    onChange,\n    onInvalid,\n    validateRules,\n    value,\n  } = element;\n\n  const validity = validityProps(validateRules);\n\n  return (\n    <Field disabled={isDisabled} error={error as string}>\n      <Input\n        aria-label={label}\n        autocomplete={autocompleteFieldCodes[code as keyof fieldCodes] || 'off'}\n        className={generateClassName(code)}\n        floatingLabel={`${label} ${element.isRequired ? '*' : ''}`}\n        id={generateId({ addressType, code })}\n        onBlur={onBlur}\n        onChange={onChange}\n        onInvalid={onInvalid}\n        placeholder={label!}\n        required={element.isRequired || false}\n        type=\"text\"\n        // @ts-ignore\n        name={code}\n        // @ts-ignore\n        value={value ?? undefined}\n        {...validity}\n      />\n    </Field>\n  );\n};\n\nconst multilineField = ({ addressType, element }: FieldFactoryProps) => {\n  const {\n    code,\n    error,\n    isDisabled,\n    isRequired,\n    label,\n    multilineCount,\n    onBlur,\n    onChange,\n    onInvalid,\n    validateRules,\n    value,\n  } = element;\n\n  const numOfFields = multilineCount ?? 0;\n  const validity = validityProps(validateRules);\n\n  return (\n    <>\n      {Array.from(Array(numOfFields).keys()).map((i) => (\n        <Field\n          disabled={isDisabled}\n          error={(error as string[])?.[i] || ''}\n          key={`${code}-${i}`}\n          className=\"dropin-field--multiline\"\n        >\n          <Input\n            id={generateId({ addressType, code, index: i })}\n            className={generateClassName(code)}\n            floatingLabel={`${label} ${i != 0 ? i : ''} ${\n              isRequired && i === 0 ? '*' : ''\n            }`}\n            autocomplete={\n              i === 0 ? autocompleteFieldCodes[code as keyof fieldCodes] : 'off'\n            }\n            aria-label={label!}\n            placeholder={`${label} ${i != 0 ? i : ''}`}\n            type=\"text\"\n            required={isRequired && i === 0}\n            onChange={onChange}\n            onBlur={onBlur}\n            onInvalid={onInvalid}\n            // @ts-ignore\n            name={`${code}-${i}`}\n            // @ts-ignore\n            value={(value as string[])?.[i] || undefined}\n            {...validity}\n          />\n        </Field>\n      ))}\n    </>\n  );\n};\n\nconst selectField = ({ addressType, element }: FieldFactoryProps) => {\n  const {\n    code,\n    error,\n    handleSelect,\n    isDisabled,\n    isRequired,\n    label,\n    onBlur,\n    onInvalid,\n    options,\n    value,\n  } = element;\n\n  const handleSelectAttribute = handleSelect ? { handleSelect } : {};\n\n  return (\n    <Field disabled={isDisabled} error={error as string}>\n      <Picker\n        id={generateId({ addressType, code })}\n        className={generateClassName(code)}\n        key={code}\n        name={code}\n        floatingLabel={`${label} ${isRequired ? '*' : ''}`}\n        required={isRequired}\n        placeholder={label!}\n        aria-label={label!}\n        options={options}\n        value={value as string}\n        autocomplete={autocompleteFieldCodes[code as keyof fieldCodes] || 'off'}\n        onBlur={onBlur}\n        onInvalid={onInvalid}\n        {...handleSelectAttribute}\n      />\n    </Field>\n  );\n};\n\nexport const createField = ({ addressType, element }: FieldFactoryProps) => {\n  switch (element.frontendInput) {\n    case 'BOOLEAN':\n    case 'DATE':\n    case 'DATETIME':\n    case 'FILE':\n    case 'GALLERY':\n    case 'IMAGE':\n    case 'MEDIA_IMAGE':\n    case 'MULTISELECT':\n    case 'PRICE':\n    case 'TEXTAREA':\n    case 'UNDEFINED':\n    case 'WEIGHT':\n      return null;\n    case 'HIDDEN':\n      return hiddenField({ addressType, element });\n    case 'TEXT':\n      return textField({ addressType, element });\n    case 'MULTILINE':\n      return multilineField({ addressType, element });\n    case 'SELECT':\n      return selectField({ addressType, element });\n    default:\n      return null;\n  }\n};\n","import { AddressFormField } from '@/checkout/data/models/address-form-fields';\nimport { ValidationRuleEnum } from '@/checkout/__generated__/types';\n\nexport type ValidityProps = {\n  accept?: string;\n  max?: string | number;\n  maxLength?: number;\n  min?: string | number;\n  minLength?: number;\n  pattern?: string;\n  required?: boolean;\n};\n\nexport type InputValidation =\n  | 'alphanumeric'\n  | 'alphanumeric-w-space'\n  | 'alphanum-with-spaces'\n  | 'alpha'\n  | 'url'\n  | 'numeric'\n  | 'email';\n\nexport const validityProps = (\n  rules: AddressFormField['validateRules']\n): ValidityProps => {\n  if (!rules) return {};\n\n  return rules.reduce((props, rule) => {\n    switch (rule.name) {\n      case ValidationRuleEnum.DateRangeMax:\n        return { ...props, max: rule.value };\n      case ValidationRuleEnum.DateRangeMin:\n        return { ...props, min: rule.value };\n      case ValidationRuleEnum.FileExtensions:\n        return { ...props, accept: rule.value };\n      case ValidationRuleEnum.InputValidation:\n        return {\n          ...props,\n          pattern: patternFor(rule.value as InputValidation),\n        };\n      case ValidationRuleEnum.MaxFileSize:\n      case ValidationRuleEnum.MaxImageHeight:\n      case ValidationRuleEnum.MaxImageWidth:\n        return props;\n      case ValidationRuleEnum.MaxTextLength:\n        return { ...props, maxLength: rule.value };\n      case ValidationRuleEnum.MinTextLength:\n        return { ...props, minLength: rule.value };\n      default:\n        throw new Error(`Unknown rule: ${rule.name}`);\n    }\n  }, {});\n};\n\nexport type Patterns = {\n  [key in InputValidation]: RegExp;\n};\n\n// TODO allow to override patterns\nexport const patterns: Patterns = {\n  alpha: /^[a-zA-Z]+$/,\n  alphanumeric: /^[a-zA-Z0-9]+$/,\n  'alphanumeric-w-space': /^[a-zA-Z0-9 ]+$/,\n  'alphanum-with-spaces': /^[a-zA-Z0-9 ]+$/,\n  email:\n    /^([a-z0-9,!#$%&'*+/=?^_`{|}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9,!#$%&'*+/=?^_`{|}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*@([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*\\.(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]){2,})$/i,\n  numeric: /^[0-9]+$/,\n  url: /^((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=+$,\\w]+@)?[A-Za-z0-9.-]+|(?:www\\.|[-;:&=+$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[+~%/.\\w\\-_]*)?\\??(?:[-+=&;%@.\\w_]*)#?(?:[.!/\\\\\\w]*))?)$/,\n};\n\nconst patternFor = (type: InputValidation): string => {\n  switch (type) {\n    case 'alpha':\n      return patterns.alpha.source;\n    case 'alphanumeric':\n      return patterns.alphanumeric.source;\n    case 'alphanumeric-w-space':\n      return patterns['alphanumeric-w-space'].source;\n    case 'alphanum-with-spaces':\n      return patterns['alphanum-with-spaces'].source;\n    case 'url':\n      return patterns.url.source;\n    case 'numeric':\n      return patterns.numeric.source;\n    case 'email':\n      return patterns.email.source;\n    default:\n      throw new Error(`Unknown validation type: ${type}`);\n  }\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const FieldsFormSkeleton: FunctionComponent = (props) => {\n  return (\n    <Skeleton {...props}>\n      <SkeletonRow variant=\"heading\" size=\"medium\" />\n      <SkeletonRow variant=\"empty\" size=\"medium\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" fullWidth={true} />\n      <SkeletonRow size=\"large\" fullWidth={true} lines={3} />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n      <SkeletonRow size=\"large\" />\n    </Skeleton>\n  );\n};\n","import { Heading } from '@/checkout/components';\nimport { createField } from '@/checkout/components/FieldsForm';\nimport '@/checkout/components/FieldsForm/FieldsForm.css';\nimport {\n  AddressFormElement,\n  AddressFormType,\n} from '@/checkout/data/models/address-form-fields';\nimport { Text } from '@adobe/elsie/i18n';\nimport { classes } from '@adobe/elsie/lib';\nimport { FunctionComponent, Ref } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\n\nexport interface FieldsFormProps extends HTMLAttributes<HTMLDivElement> {\n  addressType: AddressFormType;\n  fields: AddressFormElement[];\n  formRef: Ref<HTMLFormElement>;\n  headingId: string;\n  name: string;\n}\n\nexport const FieldsForm: FunctionComponent<FieldsFormProps> = ({\n  addressType,\n  className,\n  fields,\n  formRef,\n  headingId,\n  name,\n  ...props\n}) => {\n  return (\n    <div {...props} className={classes(['checkout-fields-form', className])}>\n      <Heading\n        level={2}\n        children={<Text id={headingId} />}\n        className=\"checkout-fields-form__title\"\n      />\n\n      <form\n        name={name}\n        ref={formRef}\n        className={classes(['checkout-fields-form__form', className])}\n        noValidate\n      >\n        {fields\n          .sort((a, b) => {\n            if (!a.sortOrder || !b.sortOrder) return a.code < b.code ? -1 : 1;\n            return a.sortOrder - b.sortOrder;\n          })\n          .map((element) => createField({ element, addressType }))}\n      </form>\n    </div>\n  );\n};\n","export const getFormValues = (form: HTMLFormElement) => {\n  const formData: any = new FormData(form);\n  const result = Object.fromEntries(formData);\n  return result;\n};\n\nexport const getFormErrors = (form: HTMLFormElement) => {\n  const formData: any = new FormData(form);\n\n  const data = Object.fromEntries(formData);\n\n  const result = Object.entries(data).reduce((result, [key]) => {\n    // @ts-ignore\n    const field = form.elements[key];\n\n    return field?.validationMessage\n      ? { ...result, [key]: field.validationMessage }\n      : { ...result };\n  }, {});\n\n  return result;\n};\n","import { getRegions } from '@/checkout/api';\nimport { FieldsFormSkeleton } from '@/checkout/components';\nimport {\n  LoadAutoFillProps,\n  DefaultValues,\n  getCartAddress,\n  getCustomerAddress,\n  MULTILINE_CUSTOM_ATTR_SPLIT,\n  MULTILINE_SUFFIX,\n  SaveAddressCommand,\n  useAddressForm,\n  usePreselectedFields,\n} from '@/checkout/components/AddressForm';\nimport '@/checkout/components/AddressForm/AddressForm.css';\nimport { FieldsForm as Component } from '@/checkout/components/FieldsForm/FieldsForm';\nimport { PreselectedAddressFields } from '@/checkout/containers';\nimport {\n  useAddressFormFields,\n  useCountries,\n  useStore,\n} from '@/checkout/context';\nimport {\n  AddressFormFieldCode,\n  AddressFormType,\n  AddressFormValues,\n  CustomerAddress,\n  Region,\n} from '@/checkout/data/models';\nimport {\n  BillingAddress,\n  ShippingAddress,\n} from '@/checkout/data/models/address';\nimport { cartSignal, customerSignal } from '@/checkout/signals';\nimport { isEmpty, processFormFields } from '@/checkout/utils';\nimport { getFormErrors } from '@adobe/elsie/lib/form-values';\nimport {\n  forwardRef,\n  HTMLAttributes,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'preact/compat';\n\nfunction useDefaultValues(defaultCountry: string | undefined) {\n  const [defaultValues, setDefaultValues] = useState<DefaultValues>({});\n\n  useEffect(() => {\n    if (!defaultCountry) return;\n    setDefaultValues((defaultValues) => ({\n      ...defaultValues,\n      country_id: defaultCountry,\n    }));\n  }, [defaultCountry]);\n\n  return { defaultValues };\n}\n\nfunction useRegions({\n  country,\n  addressType,\n}: {\n  country: string | undefined;\n  addressType: AddressFormType;\n}) {\n  const [availableRegions, setAvailableRegions] = useState<Region[]>([]);\n\n  useEffect(() => {\n    if (!country) {\n      setAvailableRegions([]);\n      return;\n    }\n\n    getRegions(country, addressType)\n      .then((data) => {\n        setAvailableRegions(data || []);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }, [setAvailableRegions, country, addressType]);\n\n  return { availableRegions };\n}\n\nfunction useFormFill({\n  autoFill,\n  addressType,\n  dismissError,\n  loadAutoFill,\n}: {\n  autoFill: boolean;\n  addressType: AddressFormType;\n  dismissError: (field: string) => void;\n  loadAutoFill: (props: LoadAutoFillProps) => void;\n}) {\n  const [hasAutoFilledForm, setHasAutofilledForm] = useState(false);\n  const customer = customerSignal.value.data;\n  const hasCustomer = !!customer;\n  const cart = cartSignal.value.data;\n  const hasCart = !!cart;\n\n  useEffect(() => {\n    if (!autoFill || !hasCart || hasAutoFilledForm) return;\n\n    let autoFillAddress:\n      | ShippingAddress\n      | BillingAddress\n      | CustomerAddress\n      | undefined;\n\n    let triggerAutoSave = false;\n\n    autoFillAddress = getCartAddress({ addressType, cart });\n\n    if (!autoFillAddress && hasCustomer) {\n      autoFillAddress = getCustomerAddress({ addressType, customer });\n      triggerAutoSave = true;\n    }\n\n    const isMultiline = (value: string) => {\n      if (!value) return false;\n      const parts = value.split(MULTILINE_CUSTOM_ATTR_SPLIT);\n      return parts.length > 1;\n    };\n\n    if (!autoFillAddress) return;\n\n    setHasAutofilledForm(true);\n\n    const addressFormValues: AddressFormValues = {\n      [AddressFormFieldCode.City]: autoFillAddress.city,\n      [AddressFormFieldCode.Company]: autoFillAddress.company || '',\n      [AddressFormFieldCode.Country]: autoFillAddress.country.value,\n      [AddressFormFieldCode.FirstName]: autoFillAddress.firstName,\n      [AddressFormFieldCode.LastName]: autoFillAddress.lastName,\n      [AddressFormFieldCode.PostCode]: autoFillAddress.postCode || '',\n      [AddressFormFieldCode.Telephone]: autoFillAddress.telephone || '',\n      [AddressFormFieldCode.Vat]: autoFillAddress.vatId || '',\n    };\n\n    const region = autoFillAddress.region;\n\n    if (region) {\n      const regionId = region?.id?.toString();\n\n      if (regionId) {\n        addressFormValues[AddressFormFieldCode.Region] = regionId;\n        addressFormValues[AddressFormFieldCode.RegionId] = regionId;\n      } else {\n        addressFormValues[AddressFormFieldCode.Region] = region.code;\n      }\n    }\n\n    if (autoFillAddress?.street && autoFillAddress.street.length > 0) {\n      autoFillAddress.street.forEach((street, index) => {\n        addressFormValues[\n          `${AddressFormFieldCode.Street}${MULTILINE_SUFFIX}${index}`\n        ] = street!;\n      });\n    }\n\n    const customAttributes = autoFillAddress?.customAttributes || [];\n\n    customAttributes.forEach((attribute) => {\n      if (!isMultiline(attribute.code)) {\n        addressFormValues[attribute.code] = attribute.value;\n      } else {\n        const values = attribute.value.split(MULTILINE_CUSTOM_ATTR_SPLIT);\n        values.forEach((value, index) => {\n          addressFormValues[`${attribute.code}${MULTILINE_SUFFIX}${index}`] =\n            value;\n        });\n      }\n    });\n\n    loadAutoFill({ values: addressFormValues, triggerAutoSave });\n  }, [\n    addressType,\n    autoFill,\n    cart,\n    customer,\n    hasAutoFilledForm,\n    hasCart,\n    hasCustomer,\n    loadAutoFill,\n    dismissError,\n  ]);\n}\n\nexport interface AddressFormProps extends HTMLAttributes<HTMLDivElement> {\n  addressType: AddressFormType;\n  autoFill?: boolean;\n  headingId: string;\n  name: string;\n  preselectedFields?: PreselectedAddressFields;\n  saveAddressHandler: (\n    command: SaveAddressCommand\n  ) => Promise<typeof cartSignal.value.data>;\n}\n\nexport type AddressFormHandle = {\n  triggerSaveAddress: (\n    signal: AbortSignal\n  ) => Promise<typeof cartSignal.value.data> | undefined;\n};\n\nexport const AddressForm = forwardRef<AddressFormHandle, AddressFormProps>(\n  (\n    {\n      addressType,\n      autoFill = true,\n      children,\n      headingId,\n      name,\n      preselectedFields,\n      saveAddressHandler,\n      ...props\n    },\n    ref\n  ) => {\n    const { fields } = useAddressFormFields();\n    const { countries: availableCountries } = useCountries();\n    const isLoadingCountries = availableCountries === undefined;\n    const isLoadingFormFields = fields === undefined;\n    const { config } = useStore();\n    const isLoadingStoreConfig = config === undefined;\n    const { defaultValues } = useDefaultValues(config?.defaultCountry);\n\n    const preselection = usePreselectedFields({\n      fields,\n      preselectedFields,\n    });\n\n    const formRef = useRef<HTMLFormElement>(null);\n\n    const {\n      address,\n      errors,\n      loadAutoFill,\n      onBlur,\n      dismissError,\n      onChange,\n      onInvalid,\n      onSelection,\n      setAddress,\n    } = useAddressForm({\n      formRef,\n      type: addressType,\n      defaultValues,\n      preselection,\n      saveAddressHandler,\n    });\n\n    const { availableRegions } = useRegions({\n      country: address.country_id,\n      addressType,\n    });\n\n    useImperativeHandle(ref, () => ({\n      triggerSaveAddress: (signal: AbortSignal) => {\n        if (!formRef.current) return;\n        const errors = getFormErrors(formRef.current);\n        if (!isEmpty(errors)) return;\n        return saveAddressHandler({ signal, address });\n      },\n    }));\n\n    useFormFill({\n      addressType,\n      autoFill,\n      loadAutoFill,\n      dismissError,\n    });\n\n    const isLoading =\n      isLoadingFormFields || isLoadingCountries || isLoadingStoreConfig;\n\n    if (isLoading) {\n      return <FieldsFormSkeleton data-testid={`${addressType}-skeleton`} />;\n    }\n\n    const transformedFields = processFormFields({\n      address,\n      addressType,\n      availableCountries,\n      availableRegions,\n      config,\n      dismissError,\n      errors,\n      fields,\n      onBlur,\n      onChange,\n      onInvalid,\n      onSelection,\n      setAddress,\n    });\n\n    const typeMapping = {\n      [AddressFormType.SHIPPING]: 'shipping',\n      [AddressFormType.BILLING]: 'billing',\n    };\n\n    return (\n      <Component\n        {...props}\n        name={name}\n        addressType={addressType}\n        className={`checkout-${typeMapping[addressType]}-form`}\n        data-testid={`${typeMapping[addressType]}-form`}\n        fields={transformedFields}\n        formRef={formRef}\n        headingId={headingId}\n      />\n    );\n  }\n);\n","import { useCallback, useEffect, useState } from 'preact/hooks';\nimport { useServices } from '@/checkout/context';\nimport { events } from '@adobe/event-bus';\nimport { DEBOUNCE_TIME } from './constants';\nimport {\n  AddressFormType,\n  AddressFormValues,\n} from '@/checkout/data/models/address-form-fields';\n\nexport function useAddressBackup(addressType: AddressFormType) {\n  const { backupService } = useServices();\n  const [addressBackup, setAddressBackup] = useState<AddressFormValues | null>(\n    null\n  );\n\n  // restore address from local storage\n  useEffect(() => {\n    const backup = backupService.restore<AddressFormValues>(addressType);\n    if (!backup) return;\n    setAddressBackup(backup);\n  }, [addressType, backupService]);\n\n  // remove backup when the order is placed\n  useEffect(() => {\n    const onOrder = events.on('checkout/order', () => {\n      backupService.remove(addressType);\n    });\n\n    return () => {\n      onOrder?.off();\n    };\n  }, [addressType, backupService]);\n\n  const backup = useCallback(\n    (address: AddressFormValues) => {\n      return setTimeout(() => {\n        // we do not want to update the state to avoid re-rendering\n        backupService.backup<AddressFormValues>(addressType, address);\n      }, DEBOUNCE_TIME);\n    },\n    [addressType, backupService]\n  );\n\n  const removeBackup = useCallback(() => {\n    backupService.remove(addressType);\n  }, [addressType, backupService]);\n\n  return { addressBackup, backup, removeBackup };\n}\n","import { useCallback, useState } from 'preact/hooks';\n\nexport type Translations = {\n  badInput: string;\n  patternMismatch: string;\n  rangeOverflow: string;\n  rangeUnderflow: string;\n  tooLong: string;\n  tooShort: string;\n  typeMismatch: string;\n  valueMissing: string;\n};\n\ntype FormElement = HTMLInputElement | HTMLSelectElement;\n\ntype Constraint =\n  | 'badInput'\n  | 'patternMismatch'\n  | 'rangeOverflow'\n  | 'rangeUnderflow'\n  | 'tooLong'\n  | 'tooShort'\n  | 'typeMismatch'\n  | 'valueMissing';\n\ntype Attribute = 'aria-label' | 'maxlength' | 'minlength' | 'min' | 'max';\n\nconst attributesMapping: Record<Constraint, Attribute> = {\n  badInput: 'aria-label',\n  patternMismatch: 'aria-label',\n  rangeOverflow: 'max',\n  rangeUnderflow: 'min',\n  tooLong: 'maxlength',\n  tooShort: 'minlength',\n  typeMismatch: 'aria-label',\n  valueMissing: 'aria-label',\n};\n\nconst constraints: Constraint[] = [\n  'badInput',\n  'patternMismatch',\n  'rangeOverflow',\n  'rangeUnderflow',\n  'tooLong',\n  'tooShort',\n  'typeMismatch',\n  'valueMissing',\n];\n\nexport const useValidity = (translations: Translations) => {\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  const validateFormElement = useCallback(\n    (formElement: FormElement) => {\n      const { name, validity, validationMessage } = formElement;\n\n      let error = validity.valid ? '' : validationMessage;\n\n      constraints.forEach((constraint) => {\n        if (!validity[constraint]) return;\n        const translation = translations[constraint];\n        if (!translation) return;\n        const attribute = attributesMapping[constraint];\n        error = translation.replace(\n          '{field}',\n          formElement.getAttribute(attribute) || ''\n        );\n      });\n\n      setErrors((prevErrors) => ({ ...prevErrors, [name]: error }));\n    },\n    [translations]\n  );\n\n  const dismissError = (code: string) => {\n    if (!errors[code]) return;\n\n    setErrors((prevErrors) => {\n      // eslint-disable-next-line\n      const { [code]: _, ...rest } = prevErrors;\n      return rest;\n    });\n  };\n\n  const resetErrors = () => {\n    setErrors({});\n  };\n\n  return {\n    errors,\n    dismissError,\n    validateFormElement,\n    resetErrors,\n  };\n};\n","import { DEBOUNCE_TIME } from '@/checkout/components/AddressForm/constants';\nimport { useAddressBackup } from '@/checkout/components/AddressForm/useAddressBackup';\nimport {\n  AddressFormErrors,\n  AddressFormType,\n  AddressFormValues,\n} from '@/checkout/data/models';\nimport {\n  Translations as ValidityTranslations,\n  useValidity,\n} from '@/checkout/hooks/useValidity';\nimport { cartSignal } from '@/checkout/signals';\nimport { isEmpty } from '@/checkout/utils';\nimport { useText } from '@adobe/elsie/i18n';\nimport { getFormErrors } from '@adobe/elsie/lib';\nimport { RefObject } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\n\nexport type DefaultValues = {\n  country_id?: string;\n};\n\nexport type AddressFormState = {\n  address: AddressFormValues;\n  errors: AddressFormErrors;\n};\n\nexport type SaveAddressCommand = {\n  signal?: AbortSignal;\n  address: AddressFormValues;\n};\n\nexport type LoadAutoFillProps = {\n  values: AddressFormValues;\n  triggerAutoSave: boolean;\n};\n\nexport type UseAddressFormProps = {\n  formRef: RefObject<HTMLFormElement>;\n  type: AddressFormType;\n  defaultValues?: DefaultValues;\n  preselection?: AddressFormValues;\n  saveAddressHandler: (\n    command: SaveAddressCommand\n  ) => Promise<typeof cartSignal.value.data>;\n};\n\nconst isFormValid = (formRef: RefObject<HTMLFormElement>): boolean => {\n  const form = formRef.current;\n  if (!form) return false;\n  const errors = getFormErrors(form);\n  return isEmpty(errors);\n};\n\nexport const useAddressForm = ({\n  formRef,\n  type,\n  defaultValues = {},\n  preselection = {},\n  saveAddressHandler,\n}: UseAddressFormProps) => {\n  const translations = useText({\n    badInput: 'Checkout.AddressForm.Validity.badInput',\n    patternMismatch: 'Checkout.AddressForm.Validity.patternMismatch',\n    rangeUnderflow: 'Checkout.AddressForm.Validity.rangeUnderflow',\n    tooLong: 'Checkout.AddressForm.Validity.tooLong',\n    tooShort: 'Checkout.AddressForm.Validity.tooShort',\n    typeMismatch: 'Checkout.AddressForm.Validity.typeMismatch',\n    valueMissing: 'Checkout.AddressForm.Validity.valueMissing',\n  }) as ValidityTranslations;\n\n  const hasUnsavedChanges = useRef(false);\n  const [address, setAddress] = useState<AddressFormValues>({});\n\n  const { addressBackup, backup, removeBackup } = useAddressBackup(type);\n\n  const { errors, validateFormElement, dismissError, resetErrors } =\n    useValidity(translations);\n\n  const saveAddressForm = useCallback(\n    (command: SaveAddressCommand) => {\n      hasUnsavedChanges.current = false;\n      saveAddressHandler(command)\n        .then(() => {\n          removeBackup();\n        })\n        .catch((error) => {\n          hasUnsavedChanges.current = true;\n          console.error('Saving address form failed:', error);\n        });\n    },\n    [removeBackup, saveAddressHandler]\n  );\n\n  const updateField = (code: string, value: string) => {\n    setAddress((prevAddress) => ({ ...prevAddress, [code]: value }));\n    hasUnsavedChanges.current = true;\n  };\n\n  const loadAutoFill = ({\n    values,\n    triggerAutoSave = false,\n  }: LoadAutoFillProps) => {\n    resetErrors();\n    setAddress((prevAddress) => ({ ...prevAddress, ...values }));\n    if (!triggerAutoSave) return;\n    hasUnsavedChanges.current = true;\n  };\n\n  const onChange = (event: Event) => {\n    const target = event.target as HTMLInputElement;\n    const { name, value } = target;\n\n    updateField(name, value);\n\n    validateFormElement(target);\n  };\n\n  const onInvalid = (event: Event) => {\n    const target = event.target as HTMLInputElement | HTMLSelectElement;\n\n    validateFormElement(target);\n  };\n\n  const onSelection = (event: Event) => {\n    const target = event.target as HTMLSelectElement;\n    const { name, value } = target;\n    updateField(name, value);\n    validateFormElement(target);\n  };\n\n  const onBlur = (event: Event) => {\n    const target = event.target as HTMLInputElement | HTMLSelectElement;\n\n    target.checkValidity();\n  };\n\n  // load default, preselected and backup address\n  useEffect(() => {\n    setAddress((prevAddress) => {\n      return {\n        ...defaultValues,\n        ...preselection,\n        ...addressBackup,\n        ...prevAddress,\n      };\n    });\n  }, [defaultValues, preselection, addressBackup]);\n\n  // backup address\n  useEffect(() => {\n    if (!hasUnsavedChanges.current) return;\n    const timerId = backup(address);\n    return () => {\n      clearTimeout(timerId);\n    };\n  }, [address, backup]);\n\n  // sync address with the backend\n  useEffect(() => {\n    if (!hasUnsavedChanges.current || !isFormValid(formRef)) return;\n\n    const controller = new AbortController();\n    const signal = controller.signal;\n\n    const timer = setTimeout(() => {\n      saveAddressForm({ signal, address });\n    }, DEBOUNCE_TIME);\n\n    return () => {\n      clearTimeout(timer);\n      controller.abort();\n    };\n  }, [address, formRef, saveAddressForm]);\n\n  return {\n    address,\n    errors,\n    loadAutoFill,\n    dismissError,\n    onChange,\n    onSelection,\n    onBlur,\n    onInvalid,\n    setAddress,\n  };\n};\n","import { PreselectedAddressFields } from '@/checkout/containers';\nimport {\n  AddressFormField,\n  AddressFormFieldCode,\n  AddressFormValues,\n} from '@/checkout/data/models/address-form-fields';\nimport { useMemo } from 'preact/hooks';\n\ntype PreselectedFieldKey = keyof PreselectedAddressFields;\n\nconst FIELD_CODE_MAPPING: {\n  [key in PreselectedFieldKey]: AddressFormFieldCode;\n} = {\n  countryCode: AddressFormFieldCode.Country,\n  region: AddressFormFieldCode.Region,\n  postCode: AddressFormFieldCode.PostCode,\n};\n\nexport type UsePreselectedFieldsProps = {\n  fields?: AddressFormField[];\n  preselectedFields?: PreselectedAddressFields;\n};\n\nexport function usePreselectedFields({\n  fields,\n  preselectedFields,\n}: UsePreselectedFieldsProps): AddressFormValues {\n  return useMemo(() => {\n    const hasFields = !!fields && fields.length > 0;\n    const hasPreselectedFields = !!preselectedFields;\n\n    if (!hasFields || !hasPreselectedFields) return {};\n\n    return Object.keys(preselectedFields).reduce((acc, code) => {\n      const formCode = FIELD_CODE_MAPPING[code as PreselectedFieldKey];\n      if (!formCode) return acc;\n\n      const formField = fields.some((field) => field.code === formCode);\n      if (!formField) return acc;\n\n      return {\n        ...acc,\n        [formCode]: preselectedFields[code as PreselectedFieldKey],\n      };\n    }, {});\n  }, [fields, preselectedFields]);\n}\n","import { AddressFormType } from '@/checkout/data/models';\nimport { Cart } from '@/checkout/data/models/cart';\nimport { Customer } from '@/checkout/data/models/customer';\n\nexport const getCustomerAddress = ({\n  addressType,\n  customer,\n}: {\n  addressType: AddressFormType;\n  customer: Customer;\n}) => {\n  return addressType === AddressFormType.BILLING\n    ? customer.defaultBillingAddress\n    : customer.defaultShippingAddress;\n};\n\nexport const getCartAddress = ({\n  addressType,\n  cart,\n}: {\n  addressType: AddressFormType;\n  cart: Cart;\n}) => {\n  if (addressType === AddressFormType.BILLING) {\n    return cart.billingAddress;\n  }\n\n  const shippingAddresses = cart.shippingAddresses;\n  if (!shippingAddresses || shippingAddresses.length === 0) return;\n  return shippingAddresses[0];\n};\n","import { useEffect, useState } from 'preact/hooks';\n\nexport const useBreakpoint = () => {\n  const getBreakpoint = () => {\n    if (window.innerWidth >= 1920) return 'xxlarge';\n    if (window.innerWidth >= 1366) return 'xlarge';\n    if (window.innerWidth >= 1024) return 'large';\n    if (window.innerWidth >= 768) return 'medium';\n\n    return 'small';\n  };\n\n  const [breakpoint, setBreakpoint] = useState<\n    ReturnType<typeof getBreakpoint>\n  >(getBreakpoint());\n\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout>;\n\n    const handleResize = () => {\n      if (timeoutId) clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => setBreakpoint(getBreakpoint()), 50);\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      if (timeoutId) clearTimeout(timeoutId);\n    };\n  }, []);\n\n  return breakpoint;\n};\n","import { Heading, OverlayLoader } from '@/checkout/components';\nimport { useBreakpoint } from '@/checkout/hooks/useBreakpoint';\nimport { Text } from '@adobe/elsie/i18n';\nimport { VComponent, classes } from '@adobe/elsie/lib';\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\n\nimport '@/checkout/components/Checkout/Checkout.css';\nimport { ErrorBanner, MergedCartBanner } from '@/checkout/containers';\n\nconst ConditionalWrapper: FunctionComponent<{\n  children?: VNode;\n  className: string;\n}> = ({ children, className }) => {\n  const breakpoint = useBreakpoint();\n  if (breakpoint === 'small') return <>{children}</>;\n  return <div className={className}>{children}</div>;\n};\n\nexport type AsideSections = {\n  cartSummary: VNode;\n  orderSummary: VNode;\n};\n\nconst Aside: FunctionComponent<{ sections: AsideSections }> = ({\n  sections,\n}) => {\n  return (\n    <ConditionalWrapper className=\"checkout__aside\">\n      <>\n        <VComponent node={sections.orderSummary} />\n        <VComponent node={sections.cartSummary} />\n      </>\n    </ConditionalWrapper>\n  );\n};\n\nexport type MainSections = {\n  billingAddress: VNode;\n  billToShippingAddress?: VNode;\n  login: VNode;\n  paymentMethods: VNode;\n  placeOrder: VNode;\n  shippingAddress?: VNode;\n  shippingMethods?: VNode;\n};\n\nconst MainContent: FunctionComponent<MainSections> = ({\n  billingAddress,\n  billToShippingAddress,\n  login,\n  paymentMethods,\n  placeOrder,\n  shippingAddress,\n  shippingMethods,\n}) => {\n  return (\n    <>\n      <VComponent node={login} />\n      {shippingAddress && <VComponent node={shippingAddress} />}\n      {billToShippingAddress && <VComponent node={billToShippingAddress} />}\n      {shippingMethods && <VComponent node={shippingMethods} />}\n      <VComponent node={paymentMethods} />\n      <VComponent node={billingAddress} />\n      <VComponent node={placeOrder} />\n    </>\n  );\n};\n\nconst Main: FunctionComponent<{\n  outOfStock?: VNode;\n  sections?: MainSections;\n}> = ({ outOfStock, sections }) => {\n  return (\n    <ConditionalWrapper className=\"checkout__main\">\n      <>\n        <Heading level={1} className=\"checkout-title\">\n          <Text id=\"Checkout.title\" />\n        </Heading>\n\n        {outOfStock && (\n          <VComponent className=\"checkout-outOfStock\" node={outOfStock} />\n        )}\n\n        {sections && <MainContent {...sections} />}\n      </>\n    </ConditionalWrapper>\n  );\n};\n\nexport interface CheckoutProps extends HTMLAttributes<HTMLDivElement> {\n  isLoading?: boolean;\n}\n\ninterface CheckoutComponent extends FunctionComponent<CheckoutProps> {\n  Main: typeof Main;\n  Aside: typeof Aside;\n}\n\nexport const Checkout: CheckoutComponent = ({\n  children,\n  className,\n  isLoading = false,\n  ...restProps\n}) => {\n  return (\n    <div\n      data-testid=\"checkout\"\n      className={classes(['checkout', className])}\n      {...restProps}\n    >\n      {isLoading && <OverlayLoader />}\n      <ErrorBanner />\n      <MergedCartBanner />\n      <div className=\"checkout__content\">{children}</div>\n    </div>\n  );\n};\n\nCheckout.Main = Main;\nCheckout.Aside = Aside;\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, JSX } from 'preact/compat';\nimport '@/checkout/components/Heading/Heading.css';\n\nexport interface HeadingProps extends Omit<HTMLAttributes<HTMLHeadingElement>, 'level'> {\n  level?: 1 | 2 | 3 | 4 | 5 | 6;\n}\n\nexport const Heading: FunctionComponent<HeadingProps> = ({\n  className,\n  children,\n  level = 2,\n}) => {\n  const Heading =\n    level >= 1 && level <= 6\n      ? (`h${level}` as keyof JSX.IntrinsicElements)\n      : 'h2';\n\n  return (\n      <Heading className={className}>\n        {children}\n      </Heading>\n  );\n};\n","import { useCallback } from 'preact/hooks';\n\nexport const useScrollLock = () => {\n  const lockScroll = useCallback(() => {\n    document.body.style.overflow = 'hidden';\n  }, []);\n\n  const unlockScroll = useCallback(() => {\n    document.body.style.overflow = '';\n  }, []);\n\n  return {\n    lockScroll,\n    unlockScroll,\n  };\n};\n","import '@/checkout/components/OverlayLoader/OverlayLoader.css';\nimport { useScrollLock } from '@/checkout/hooks/useLockScroll';\nimport { ProgressSpinner } from '@adobe/elsie/components';\nimport { classes } from '@adobe/elsie/lib';\nimport { FunctionComponent } from 'preact';\nimport { useEffect } from 'preact/hooks';\n\nexport const OverlayLoader: FunctionComponent<{ className?: string }> = ({\n  className,\n}) => {\n  const { lockScroll, unlockScroll } = useScrollLock();\n\n  useEffect(() => {\n    lockScroll();\n    return unlockScroll;\n  }, [lockScroll, unlockScroll]);\n\n  return (\n    <div\n      data-testid=\"checkout-overlay-loader\"\n      className={classes(['checkout-overlay-loader', className])}\n    >\n      <ProgressSpinner />\n    </div>\n  );\n};\n"],"names":["autocompleteFieldCodes","firstname","lastname","company","country","region","city","postcode","telephone","street","email","middlename","prefix","suffix","isEmpty","obj","Object","keys","length","constructor","transformRegionOptions","regions","map","value","id","toString","code","text","name","transformCountryOptions","countries","label","processFormFields","address","addressType","availableCountries","availableRegions","config","dismissError","errors","fields","onBlur","onChange","onInvalid","onSelection","setAddress","resetRegion","AddressFormFieldCode","Region","RegionId","syncRegionId","regionId","field","error","frontendInput","handleSelect","isDisabled","isRequired","options","AttributeFrontendInputEnum","Multiline","getMultilineValues","Country","AddressFormType","SHIPPING","regionsSignal","event","target","refetchEstimatedShippingMethods","country_code","selectedRegionId","pending","countriesWithRequiredRegion","includes","country_id","displayStateIfOptional","Undefined","Select","Text","selectedRegion","region_id","defaultOnChange","region_name","find","regionOption","PostCode","countriesWithOptionalZipCode","estimateShipppingTimer","criteria","cartData","cartSignal","data","hasCartData","firstAddress","shippingAddresses","availableShippingMethods","clearTimeout","setTimeout","estimateShippingMethods","cartId","DEBOUNCE_TIME","generateId","index","generateClassName","hiddenField","element","defaultValue","_jsx","className","type","textField","validateRules","validity","validityProps","Field","disabled","children","Input","autocomplete","floatingLabel","placeholder","required","undefined","multilineField","multilineCount","numOfFields","_Fragment","Array","from","i","selectField","handleSelectAttribute","Picker","createField","rules","reduce","props","rule","ValidationRuleEnum","DateRangeMax","max","DateRangeMin","min","FileExtensions","accept","InputValidation","pattern","patternFor","MaxFileSize","MaxImageHeight","MaxImageWidth","MaxTextLength","maxLength","MinTextLength","minLength","Error","patterns","alpha","alphanumeric","numeric","url","source","FieldsFormSkeleton","_jsxs","Skeleton","SkeletonRow","variant","size","fullWidth","lines","FieldsForm","formRef","headingId","classes","Heading","level","ref","noValidate","sort","a","b","sortOrder","getFormErrors","form","formData","result","key","useDefaultValues","defaultCountry","defaultValues","setDefaultValues","useState","useEffect","useRegions","setAvailableRegions","getRegions","then","catch","console","useFormFill","autoFill","loadAutoFill","hasAutoFilledForm","setHasAutofilledForm","customer","customerSignal","hasCustomer","cart","hasCart","autoFillAddress","triggerAutoSave","getCartAddress","getCustomerAddress","isMultiline","split","MULTILINE_CUSTOM_ATTR_SPLIT","addressFormValues","City","Company","FirstName","firstName","LastName","lastName","postCode","Telephone","Vat","vatId","forEach","Street","MULTILINE_SUFFIX","customAttributes","attribute","values","AddressForm","forwardRef","preselectedFields","saveAddressHandler","useAddressFormFields","useCountries","isLoadingCountries","isLoadingFormFields","useStore","isLoadingStoreConfig","preselection","usePreselectedFields","useRef","useAddressForm","useImperativeHandle","triggerSaveAddress","signal","current","transformedFields","typeMapping","BILLING","Component","useAddressBackup","backupService","useServices","addressBackup","setAddressBackup","backup","restore","onOrder","events","on","remove","off","useCallback","removeBackup","attributesMapping","badInput","patternMismatch","rangeOverflow","rangeUnderflow","tooLong","tooShort","typeMismatch","valueMissing","constraints","useValidity","translations","setErrors","validateFormElement","formElement","validationMessage","valid","constraint","translation","replace","getAttribute","prevErrors","_","rest","resetErrors","isFormValid","useText","hasUnsavedChanges","saveAddressForm","command","updateField","prevAddress","checkValidity","timerId","controller","AbortController","timer","abort","FIELD_CODE_MAPPING","countryCode","useMemo","acc","formCode","some","defaultBillingAddress","defaultShippingAddress","billingAddress","useBreakpoint","getBreakpoint","window","innerWidth","breakpoint","setBreakpoint","timeoutId","handleResize","addEventListener","removeEventListener","ConditionalWrapper","Aside","sections","VComponent","node","orderSummary","cartSummary","MainContent","billToShippingAddress","login","paymentMethods","placeOrder","shippingAddress","shippingMethods","Main","outOfStock","Checkout","isLoading","restProps","OverlayLoader","ErrorBanner","MergedCartBanner","useScrollLock","lockScroll","body","style","overflow","unlockScroll","ProgressSpinner"],"mappings":"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","x_google_ignoreList":[8]}