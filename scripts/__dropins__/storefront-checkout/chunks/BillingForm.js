import"@dropins/tools/event-bus.js";import{u as A,l as B,i as F,j as b}from"./getStoreConfig.js";import{A as h}from"./getMultilineValues.js";import{s as v}from"./setBillingAddress.js";import{p as I}from"./setShippingAddress.js";import{A as y}from"./ToggleButton.js";import"@dropins/tools/preact-hooks.js";import"@dropins/tools/lib.js";import{c as S}from"./BillToShippingAddress2.js";import{useRef as k,useMemo as L,useCallback as _,useEffect as C}from"@dropins/tools/preact-compat.js";import{jsx as M}from"@dropins/tools/preact-jsx-runtime.js";import{B as N}from"./constants3.js";const z=f=>{var u;const l=k(null),{fields:i}=A(),o=B.value.data,n=o==null?void 0:o.defaultBillingAddress,s=F.value.data,a=(s==null?void 0:s.id)||"",t=s==null?void 0:s.billingAddress,m=(u=s==null?void 0:s.shippingAddresses)==null?void 0:u[0],{checked:r,setByUser:p}=b.value,d=!r,g=L(()=>!i||!d?!1:t?!S(i,t,m):!!n,[d,i,t,m,n]),c=_(e=>v({signal:e.signal,cartId:a,input:{address:r?void 0:I(e.address),same_as_shipping:r}}),[a,r]);return C(()=>{if(!p)return;const e=new AbortController;return r||l.current.triggerSaveAddress(e.signal),()=>{e.abort()}},[r,p]),M(y,{...f,addressType:h.BILLING,autoFill:g,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:N,ref:l,saveAddressHandler:c,style:{display:d?"block":"none"}})};export{z as B};
//# sourceMappingURL=BillingForm.js.map
