{"version":3,"file":"MergedCartBanner.js","sources":["../../node_modules/@adobe/elsie/src/icons/InfoFilled.svg","../../src/containers/MergedCartBanner/MergedCartBanner.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgInfoFilled = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M0 12C0 5.37931 5.37931 0 12 0C18.6207 0 24 5.37931 24 12C24 18.6207 18.6207 24 12 24C5.37931 24 0 18.6207 0 12ZM11.8885 5.06101C11.1405 5.06101 10.5357 5.66579 10.5357 6.4138V6.57295C10.5835 7.27321 11.1882 7.81433 11.8885 7.76658H12.0795C12.7797 7.70292 13.289 7.09815 13.2413 6.4138C13.2413 5.66579 12.6365 5.06101 11.8885 5.06101ZM13.1935 16.8223H14.1007C14.2599 16.8223 14.4031 16.9655 14.4031 17.1247V17.7294C14.4031 17.9045 14.2599 18.0318 14.1007 18.0318H9.8832C9.70813 18.0318 9.58081 17.8886 9.58081 17.7294V17.1247C9.58081 16.9496 9.72405 16.8223 9.8832 16.8223H10.7904V10.7905H9.8832C9.70813 10.7905 9.58081 10.6472 9.58081 10.4881V9.88329C9.58081 9.70823 9.72405 9.58091 9.8832 9.58091H12.5888C12.923 9.58091 13.1935 9.85146 13.1935 10.1857V16.8223Z\", fill: \"currentColor\" }));\nexport default SvgInfoFilled;\n","import { FunctionComponent, useEffect, useState } from 'preact/compat';\nimport { Text } from '@adobe/elsie/i18n';\nimport { AlertBanner, AlertBannerProps, Icon } from '@adobe/elsie/components';\nimport { InfoFilled } from '@adobe/elsie/icons';\nimport { events } from '@adobe/event-bus';\n\nexport const MergedCartBanner: FunctionComponent<Partial<AlertBannerProps>> = (\n  props\n) => {\n  const [totalMergedItems, setTotalMergedItems] = useState(0);\n\n  useEffect(() => {\n    const subscription = events.on('cart/merged', (data) => {\n      const oldCartItems = data?.oldCartItems?.reduce(\n        (acc, item) => acc + item.quantity,\n        0\n      );\n\n      if (oldCartItems > 0) {\n        setTotalMergedItems(oldCartItems);\n      }\n    });\n    return () => {\n      subscription?.off();\n    };\n  }, []);\n\n  const onDismiss = () => {\n    setTotalMergedItems(0);\n  };\n\n  if (!totalMergedItems) return null;\n\n  return (\n    <AlertBanner\n      {...props}\n      className=\"checkout__banner\"\n      data-testid=\"merged-cart-banner\"\n      icon={<Icon source={InfoFilled} />}\n      message={\n        <span>\n          <Text\n            id=\"Checkout.MergedCartBanner.items\"\n            fields={{\n              count: totalMergedItems,\n            }}\n            plural={totalMergedItems}\n          />\n          <Text id=\"Checkout.MergedCartBanner.genericMessage\" />\n        </span>\n      }\n      onDismiss={onDismiss}\n      variant=\"neutral\"\n    />\n  );\n};\n"],"names":["SvgInfoFilled","props","React","MergedCartBanner","totalMergedItems","setTotalMergedItems","useState","useEffect","subscription","events","on","data","oldCartItems","reduce","acc","item","quantity","off","onDismiss","_jsx","AlertBanner","className","icon","Icon","source","InfoFilled","message","_jsxs","children","Text","id","fields","count","plural","variant"],"mappings":"yWACA,MAAMA,EAAiBC,GAA0BC,EAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAO,EAAkBC,EAAM,cAAc,OAAQ,CAAE,SAAU,UAAW,SAAU,UAAW,EAAG,6vBAA8vB,KAAM,cAAgB,CAAA,CAAC,ECK7hCC,EAERF,GAAA,CACH,KAAM,CAACG,EAAkBC,CAAmB,EAAIC,EAAS,CAAC,EAE1DC,EAAU,IAAM,CACd,MAAMC,EAAeC,EAAOC,GAAG,cAAyBC,GAAA,OAChDC,MAAAA,GAAeD,EAAAA,GAAAA,YAAAA,EAAMC,eAAND,YAAAA,EAAoBE,OACvC,CAACC,EAAKC,IAASD,EAAMC,EAAKC,SAC1B,GAGEJ,EAAe,GACjBP,EAAoBO,CAAY,CAClC,CACD,EACD,MAAO,IAAM,CACXJ,GAAAA,MAAAA,EAAcS,KAAI,CAEtB,EAAG,CAAE,CAAA,EAEL,MAAMC,EAAYA,IAAM,CACtBb,EAAoB,CAAC,CAAA,EAGvB,OAAKD,EAGHe,EAACC,EAAW,CAAA,GACNnB,EACJoB,UAAU,mBACV,cAAY,qBACZC,KAAMH,EAACI,EAAI,CAACC,OAAQC,CAAAA,CAAa,EACjCC,QACEC,EAAA,OAAA,CAAAC,SAAA,CACET,EAACU,EAAI,CACHC,GAAG,kCACHC,OAAQ,CACNC,MAAO5B,CACT,EACA6B,OAAQ7B,CAAAA,CACT,EACDe,EAACU,EAAI,CAACC,GAAG,0CAAA,CAA4C,CAAC,CAAA,CAClD,EAERZ,UAAAA,EACAgB,QAAQ,SAAA,CACT,EAtB2B,IAwBhC","x_google_ignoreList":[0]}