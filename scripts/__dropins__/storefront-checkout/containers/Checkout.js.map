{"version":3,"file":"Checkout.js","sources":["../../node_modules/@adobe/elsie/src/icons/Cart.svg","../../node_modules/@adobe/elsie/src/icons/OrderError.svg","../../src/containers/Checkout/constants.ts","../../src/hooks/useAuthentication/useAuthentication.tsx","../../src/containers/Checkout/Checkout.tsx","../../src/components/EmptyCart/EmptyCart.tsx","../../src/components/OutOfStock/OutOfStock.tsx","../../src/components/ServerError/ServerError.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgCart = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_102_196)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3601 18.16H6.5601L4.8801 3H2.3501M19.6701 19.59C19.6701 20.3687 19.0388 21 18.2601 21C17.4814 21 16.8501 20.3687 16.8501 19.59C16.8501 18.8113 17.4814 18.18 18.2601 18.18C19.0388 18.18 19.6701 18.8113 19.6701 19.59ZM7.42986 19.59C7.42986 20.3687 6.79858 21 6.01986 21C5.24114 21 4.60986 20.3687 4.60986 19.59C4.60986 18.8113 5.24114 18.18 6.01986 18.18C6.79858 18.18 7.42986 18.8113 7.42986 19.59Z\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M5.25 6.37L20.89 8.06L20.14 14.8H6.19\", stroke: \"currentColor\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_102_196\" }, /* @__PURE__ */ React.createElement(\"rect\", { vectorEffect: \"non-scaling-stroke\", width: 19.29, height: 19.5, fill: \"white\", transform: \"translate(2.3501 2.25)\" }))));\nexport default SvgCart;\n","import * as React from \"react\";\nconst SvgOrderError = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_4797_15331)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M10.25 20.91L1.5 17.55V6.51996L10.25 9.92996V20.91Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M6.24023 4.64001L14.9902 8.06001V11.42\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19 13.31L15.5 19.37H22.5L19 13.31Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19.0202 17.11H18.9802L18.9502 15.56H19.0502L19.0202 17.11ZM18.9602 18.29V18.06H19.0502V18.29H18.9602Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M19 12.16V6.51996L10.25 9.92996V20.91L14.27 19.37L14.4 19.32\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M1.5 6.51999L10.25 3.04999L19 6.51999L10.25 9.92999L1.5 6.51999Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_4797_15331\" }, /* @__PURE__ */ React.createElement(\"rect\", { width: 22, height: 18.86, fill: \"white\", transform: \"translate(1 2.54999)\" }))));\nexport default SvgOrderError;\n","export const OUT_OF_STOCK = 'OUT_OF_STOCK';\n","import { useEffect } from 'preact/hooks';\nimport { events } from '@adobe/event-bus';\nimport { isAuthenticatedSignal } from '@/checkout/signals/AuthenticationSignal';\nimport { CheckoutEvent, useCheckoutState } from '@/checkout/context/checkout';\n\nexport function useAuthentication() {\n  const { dispatch } = useCheckoutState();\n\n  useEffect(() => {\n    const onAuthenticated = events.on(\n      'authenticated',\n      (isAuthenticated) => {\n        isAuthenticatedSignal.value = isAuthenticated;\n\n        if (isAuthenticated)\n          dispatch({ type: CheckoutEvent.USER_AUTHENTICATED });\n        else dispatch({ type: CheckoutEvent.USER_UNAUTHENTICATED });\n      },\n      { eager: true }\n    );\n\n    return () => {\n      onAuthenticated?.off();\n    };\n  }, [dispatch]);\n}\n","import { ProductStockStatus } from '@/checkout/__generated__/types';\nimport {\n  getCart,\n  getCustomer,\n  getStockStatus,\n  placeOrder,\n  UnexpectedError,\n} from '@/checkout/api';\nimport {\n  Checkout as CheckoutComponent,\n  EmptyCart,\n  OutOfStock,\n  ServerError,\n} from '@/checkout/components';\nimport {\n  BillingForm,\n  BillToShippingAddress,\n  CartSummary,\n  LoginForm as Login,\n  OrderSummary,\n  PaymentMethods,\n  PlaceOrder,\n  ShippingForm,\n  ShippingMethods,\n} from '@/checkout/containers';\nimport { PaymentMethodSlotContext } from '@/checkout/containers/PaymentMethods';\nimport {\n  CheckoutEvent,\n  CheckoutState,\n  useCheckoutState,\n} from '@/checkout/context/checkout';\nimport { useAuthentication } from '@/checkout/hooks/useAuthentication';\nimport { cartSignal, isBillToShippingSignal } from '@/checkout/signals';\nimport { isAuthenticatedSignal } from '@/checkout/signals/AuthenticationSignal';\nimport { useText } from '@adobe/elsie/i18n';\nimport { classes, Slot, SlotProps } from '@adobe/elsie/lib';\nimport { events } from '@adobe/event-bus';\nimport {\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useState,\n} from 'preact/compat';\nimport { Divider } from '@adobe/elsie/components';\n\nexport type PreselectedAddressFields = {\n  countryCode?: string;\n  region?: string;\n  postCode?: string;\n};\n\nexport type PreselectedShippingMethod = {\n  carrierCode: string;\n  methodCode: string;\n};\n\nexport type PreselectedCartData = {\n  address?: PreselectedAddressFields;\n  shippingMethod?: PreselectedShippingMethod;\n};\n\nexport interface CheckoutProps extends HTMLAttributes<HTMLDivElement> {\n  routeHome?: () => string;\n  routeCart?: () => string;\n  slots?: {\n    BillingForm?: SlotProps;\n    BillToShipping?: SlotProps;\n    CartSummary?: SlotProps;\n    Login?: SlotProps;\n    OrderSummary?: SlotProps;\n    PaymentMethods?: SlotProps<PaymentMethodSlotContext>;\n    PlaceOrder?: SlotProps;\n    ShippingForm?: SlotProps;\n    ShippingMethods?: SlotProps;\n  };\n  preselectedCartData?: PreselectedCartData;\n  onSignInClick?: () => void;\n  onSignOutClick?: () => void;\n}\n\nexport const Checkout = (props: CheckoutProps) => {\n  const {\n    className,\n    slots,\n    routeHome,\n    routeCart,\n    preselectedCartData,\n    onSignInClick,\n    onSignOutClick,\n    ...restProps\n  } = props;\n  const { state, dispatch } = useCheckoutState();\n\n  const [serverError, setServerError] = useState('');\n  const hasErrors = serverError !== '';\n\n  const [handlePlaceOrder, setHandlePlaceOrder] =\n    useState<() => Promise<void> | undefined>();\n\n  const [hasOutOfStock, setHasOutOfStock] = useState(false);\n\n  const cart = cartSignal.value.data;\n  const isVirtual = Boolean(cart?.virtual);\n\n  const translations = useText({\n    CheckoutUnexpectedError: 'Checkout.ServerError.unexpected',\n  });\n\n  const defaultPlaceOrderHandler = useCallback(async () => {\n    if (!cart) return;\n    await placeOrder(cart.id);\n    cartSignal.value = { pending: false };\n    dispatch({ type: CheckoutEvent.ORDER_PLACED });\n  }, [cart, dispatch]);\n\n  const onPlaceOrder = (fn: () => Promise<void>) => {\n    setHandlePlaceOrder(() => fn);\n  };\n\n  const dismissError = async () => {\n    setServerError('');\n    if (!cart) return;\n\n    if (isAuthenticatedSignal.value) {\n      await loadCustomerData();\n    } else {\n      await loadGuestData(cart.id);\n    }\n  };\n\n  const handleServerError = (error: any) => {\n    setServerError(\n      error instanceof TypeError || error instanceof UnexpectedError\n        ? translations.CheckoutUnexpectedError\n        : error.message\n    );\n  };\n\n  const loadGuestData = useCallback(\n    async (cartId: string) => {\n      const cart = await getCart(cartId);\n      dispatch({ type: CheckoutEvent.CART_UPDATED, payload: cart });\n    },\n    [dispatch]\n  );\n\n  const loadCustomerData = useCallback(async () => {\n    const cart = await getCart();\n    await getCustomer();\n    dispatch({ type: CheckoutEvent.CART_UPDATED, payload: cart });\n  }, [dispatch]);\n\n  const checkStockStatus = async (cartId?: string) => {\n    const result = await getStockStatus(cartId);\n    setHasOutOfStock(result === ProductStockStatus.OutOfStock);\n  };\n\n  useAuthentication();\n\n  // workaround to force re-render BillToShippingAddress when the user logs in.\n  const [billToShippingAddressKey, setBillToShippingAddressKey] = useState({});\n\n  useEffect(() => {\n    if (state === CheckoutState.IN_PROGRESS) {\n      setBillToShippingAddressKey({});\n    }\n  }, [state]);\n\n  useEffect(() => {\n    const onCartData = events.on(\n      'cart/data',\n      (cart) => {\n        if (isAuthenticatedSignal.value) {\n          loadCustomerData();\n          checkStockStatus();\n          return;\n        }\n\n        if (cart && cart.id) {\n          cartSignal.value = { ...cartSignal.value, pending: true };\n          loadGuestData(cart.id);\n          checkStockStatus(cart.id);\n          return;\n        }\n\n        cartSignal.value = { data: null, pending: false };\n        dispatch({ type: CheckoutEvent.CART_UPDATED, payload: null });\n      },\n      { eager: true }\n    );\n\n    return () => {\n      onCartData?.off();\n    };\n  }, [dispatch, loadCustomerData, loadGuestData]);\n\n  if (state === CheckoutState.COMPLETE) {\n    return null;\n  }\n\n  if (state === CheckoutState.EMPTY) {\n    return <EmptyCart routeHome={routeHome} />;\n  }\n\n  if (hasErrors) {\n    return <ServerError errorMessage={serverError} onClick={dismissError} />;\n  }\n\n  const renderMain = () => {\n    if (hasOutOfStock) {\n      return (\n        <CheckoutComponent.Main\n          outOfStock={<OutOfStock routeCart={routeCart} />}\n        />\n      );\n    }\n\n    const billingAddressVisibilityToggle = isBillToShippingSignal.value.checked\n      ? 'checkout-billing-form__hidden'\n      : 'checkout-billing-form__visible';\n\n    return (\n      <CheckoutComponent.Main\n        sections={{\n          billingAddress: (\n            <>\n              <Slot\n                name=\"BillingForm\"\n                className={billingAddressVisibilityToggle}\n                slot={slots?.BillingForm}\n              >\n                <BillingForm />\n              </Slot>\n              <Divider\n                className={classes([\n                  `${billingAddressVisibilityToggle}`,\n                  'checkout-billing-form__divider',\n                ])}\n                variant=\"primary\"\n              />\n            </>\n          ),\n          billToShippingAddress: isVirtual ? undefined : (\n            <BillToShippingAddress key={billToShippingAddressKey} />\n          ),\n          login: (\n            <Slot name=\"Login\" slot={slots?.Login}>\n              <Login\n                onSignInClick={onSignInClick}\n                onSignOutClick={() => {\n                  dispatch({ type: CheckoutEvent.USER_SIGN_OUT });\n                  onSignOutClick?.();\n                }}\n              />\n            </Slot>\n          ),\n          paymentMethods: (\n            <PaymentMethods\n              isShippingInfoRequired={!isVirtual}\n              onPlaceOrder={onPlaceOrder}\n              handleServerError={handleServerError}\n              paymentMethodsSlot={slots?.PaymentMethods}\n            />\n          ),\n          placeOrder: (\n            <PlaceOrder\n              onClick={handlePlaceOrder ?? defaultPlaceOrderHandler}\n              handleServerError={handleServerError}\n            />\n          ),\n          shippingAddress: isVirtual ? undefined : (\n            <Slot name=\"ShippingForm\" slot={slots?.ShippingForm}>\n              <ShippingForm preselectedFields={preselectedCartData?.address} />\n            </Slot>\n          ),\n          shippingMethods: isVirtual ? undefined : (\n            <Slot name=\"ShippingMethods\" slot={slots?.ShippingMethods}>\n              <ShippingMethods\n                preSelectedMethod={preselectedCartData?.shippingMethod}\n              />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  const renderAside = () => {\n    return (\n      <CheckoutComponent.Aside\n        sections={{\n          cartSummary: (\n            <Slot name=\"CartSummary\" slot={slots?.CartSummary}>\n              <CartSummary routeCart={routeCart} />\n            </Slot>\n          ),\n          orderSummary: (\n            <Slot name=\"OrderSummary\" slot={slots?.OrderSummary}>\n              <OrderSummary />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  return (\n    <CheckoutComponent\n      className={className}\n      isLoading={state === CheckoutState.LOADING}\n      {...restProps}\n    >\n      {renderAside()}\n      {renderMain()}\n    </CheckoutComponent>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/EmptyCart/EmptyCart.css';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { Cart } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface EmptyCartProps extends HTMLAttributes<HTMLDivElement> {\n  title?: string;\n  routeHome?: () => string;\n}\n\nexport const EmptyCart: FunctionComponent<EmptyCartProps> = ({\n  className,\n  title,\n  routeHome,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.EmptyCart.title',\n    Button: 'Checkout.EmptyCart.button',\n  });\n\n  return (\n    <IllustratedMessage\n      {...props}\n      data-testid=\"checkout-empty-cart\"\n      className={classes(['checkout-empty-cart', className])}\n      heading={title ?? translations.Title}\n      icon={\n        <Icon\n          className={classes(['checkout-empty-cart__icon'])}\n          source={Cart}\n        />\n      }\n      action={\n        routeHome?.() ? (\n          <Button\n            className=\"checkout-empty-cart__button\"\n            size=\"medium\"\n            variant=\"primary\"\n            key=\"routeHome\"\n            type=\"submit\"\n            href={routeHome?.()}\n          >\n            {translations.Button}\n          </Button>\n        ) : undefined\n      }\n    />\n  );\n};\n","import { FunctionComponent, JSX } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/OutOfStock/OutOfStock.css';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface OutOfStockProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  icon?: FunctionComponent<JSX.SVGAttributes<SVGElement>>;\n  routeCart?: () => string;\n}\n\nexport const OutOfStock: FunctionComponent<OutOfStockProps> = ({\n  className,\n  icon,\n  routeCart,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.OutOfStock.title',\n    Message: 'Checkout.OutOfStock.message',\n  });\n\n  return (\n    <div\n      {...props}\n      className={classes(['checkout-out-of-stock', className])}\n      data-testid=\"checkout-out-of-stock\"\n    >\n      <IllustratedMessage\n        heading={translations.Title}\n        message={<p>{translations.Message}</p>}\n        icon={\n          <Icon\n            source={icon ?? OrderError}\n            className={classes(['checkout-out-of-stock__icon'])}\n          />\n        }\n      />\n\n      {routeCart?.() && (\n        <Button\n          className=\"checkout-out-of-stock__button\"\n          size=\"medium\"\n          variant=\"primary\"\n          key=\"routeCart\"\n          type=\"submit\"\n          href={routeCart?.()}\n        >\n          <Text id=\"Checkout.OutOfStock.button\" />\n        </Button>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/ServerError/ServerError.css';\nimport { MarkupText, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface ServerErrorProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  errorMessage: string;\n  contactSupport?: string;\n  onClick?: (e: any) => void;\n}\n\nexport const ServerError: FunctionComponent<ServerErrorProps> = ({\n  className,\n  errorMessage,\n  contactSupport,\n  ...props\n}) => {\n  const { onClick } = props;\n\n  const translations = useText({\n    Title: 'Checkout.ServerError.title',\n    Message: 'Checkout.ServerError.message',\n    ContactSupport: 'Checkout.ServerError.contactSupport',\n    Button: 'Checkout.ServerError.button',\n  });\n\n  return (\n    <IllustratedMessage\n      aria-invalid=\"true\"\n      aria-describedby=\"checkout-server-error__message\"\n      aria-live=\"polite\"\n      className={classes(['checkout-server-error', className])}\n      data-testid=\"checkout-server-error\"\n      heading={errorMessage ?? translations.Title}\n      message={\n        <p id={classes(['checkout-server-error__message'])}>\n          {translations.Message}\n          <br />\n          <MarkupText id=\"\">\n            {contactSupport ?? translations.ContactSupport}\n          </MarkupText>\n        </p>\n      }\n      icon={\n        <Icon\n          className={classes(['checkout-server-error__icon'])}\n          source={OrderError}\n        />\n      }\n      action={\n        <Button\n          className={classes(['checkout-server-error__button'])}\n          onClick={onClick}\n        >\n          {translations.Button}\n        </Button>\n      }\n    />\n  );\n};\n"],"names":["SvgCart","props","React","SvgOrderError","OUT_OF_STOCK","useAuthentication","dispatch","useCheckoutState","useEffect","onAuthenticated","events","on","isAuthenticated","isAuthenticatedSignal","value","type","CheckoutEvent","USER_AUTHENTICATED","USER_UNAUTHENTICATED","eager","off","Checkout","className","slots","routeHome","routeCart","preselectedCartData","onSignInClick","onSignOutClick","restProps","state","serverError","setServerError","useState","hasErrors","handlePlaceOrder","setHandlePlaceOrder","hasOutOfStock","setHasOutOfStock","cart","cartSignal","data","isVirtual","Boolean","virtual","translations","useText","CheckoutUnexpectedError","defaultPlaceOrderHandler","useCallback","placeOrder","id","pending","ORDER_PLACED","onPlaceOrder","fn","dismissError","loadCustomerData","loadGuestData","handleServerError","error","TypeError","UnexpectedError","message","cartId","getCart","CART_UPDATED","payload","getCustomer","checkStockStatus","result","getStockStatus","ProductStockStatus","OutOfStock","billToShippingAddressKey","setBillToShippingAddressKey","CheckoutState","IN_PROGRESS","onCartData","COMPLETE","EMPTY","_jsx","EmptyCart","ServerError","errorMessage","onClick","renderMain","CheckoutComponent","Main","outOfStock","billingAddressVisibilityToggle","isBillToShippingSignal","checked","sections","billingAddress","_jsxs","_Fragment","children","Slot","name","slot","BillingForm","Divider","classes","variant","billToShippingAddress","undefined","BillToShippingAddress","login","Login","USER_SIGN_OUT","paymentMethods","PaymentMethods","isShippingInfoRequired","paymentMethodsSlot","PlaceOrder","shippingAddress","ShippingForm","preselectedFields","address","shippingMethods","ShippingMethods","preSelectedMethod","shippingMethod","renderAside","Aside","cartSummary","CartSummary","orderSummary","OrderSummary","isLoading","LOADING","title","Title","Button","IllustratedMessage","heading","icon","Icon","source","Cart","action","size","href","Message","OrderError","Text","contactSupport","ContactSupport","MarkupText"],"mappings":"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","x_google_ignoreList":[0,1]}