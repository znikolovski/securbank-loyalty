import{useState as k,useCallback as M,useRef as A,useEffect as F}from"@dropins/tools/preact-hooks.js";import{classes as g}from"@dropins/tools/lib.js";import{Checkbox as q,Button as D,Field as L,Input as N}from"@dropins/tools/components.js";import{jsxs as x,jsx as c,Fragment as I}from"@dropins/tools/preact-jsx-runtime.js";import{useText as O}from"@dropins/tools/i18n.js";import*as h from"@dropins/tools/preact-compat.js";import{memo as C,useState as B}from"@dropins/tools/preact-compat.js";const j=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"square",strokeLinejoin:"round"})),P=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.8052 14.4968C10.8552 14.4968 9.9752 14.0268 9.4452 13.2368L9.4152 13.1868L9.3852 13.1268C8.1352 11.2268 7.5352 8.96681 7.6852 6.68681C7.7552 4.42681 9.6052 2.61681 11.8652 2.60681H12.0052C14.2752 2.47681 16.2152 4.21681 16.3452 6.47681C16.3452 6.55681 16.3452 6.62681 16.3452 6.70681C16.4852 8.94681 15.9052 11.1768 14.6852 13.0568L14.6052 13.1768C14.0552 13.9868 13.1352 14.4668 12.1652 14.4768H12.0052C11.9352 14.4768 11.8652 14.4868 11.7952 14.4868L11.8052 14.4968Z",stroke:"currentColor"}),h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M4.3252 21.5469C4.3552 20.4169 4.4752 19.2869 4.6752 18.1769C4.8952 17.1669 6.4752 16.0269 8.9052 15.1569C9.2352 15.0369 9.4852 14.7869 9.5952 14.4569L9.8052 14.0269",stroke:"currentColor"}),h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M14.425 14.4069L14.165 14.1569C14.375 14.5969 14.725 14.9569 15.155 15.1869C16.945 15.7969 19.125 16.9569 19.375 18.2069C19.585 19.3069 19.685 20.4269 19.675 21.5369",stroke:"currentColor"})),R=e=>h.createElement("svg",{id:"Icon_Warning_Base",width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("g",{clipPath:"url(#clip0_841_1324)"},h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.9949 2.30237L0.802734 21.6977H23.1977L11.9949 2.30237Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M12.4336 10.5504L12.3373 14.4766H11.6632L11.5669 10.5504V9.51273H12.4336V10.5504ZM11.5883 18.2636V17.2687H12.4229V18.2636H11.5883Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),h.createElement("defs",null,h.createElement("clipPath",{id:"clip0_841_1324"},h.createElement("rect",{width:24,height:21,fill:"white",transform:"translate(0 1.5)"})))),W=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M6.75 12.762L10.2385 15.75L17.25 9",stroke:"currentColor"})),J=e=>h.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),h.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),ie=e=>{if(!e)return null;const s=new FormData(e);if(s&&typeof s.entries=="function"){const r=s.entries();if(r&&typeof r[Symbol.iterator]=="function")return JSON.parse(JSON.stringify(Object.fromEntries(r)))||{}}return{}},de=e=>typeof e=="function",X=C(({initialValue:e=!1,label:s,errors:r,name:n="",onChange:o,onBlur:a,...l})=>{const t=r?r[n]:"",u=t?"error":"",[m,_]=k(e),v=M(w=>{o==null||o(w),_(f=>!f)},[o]);return x("div",{className:g(["auth-checkbox-field"]),children:[c(q,{name:n,label:s,value:m,checked:m,error:!!t,onChange:v,onBlur:a,"data-testid":n||"uniqueCheckboxId",...l}),u?c("div",{className:"auth-checkbox-field__error",children:t.replace("Enter a checkbox, this field","Checkbox")}):null]})}),ue=({type:e,buttonText:s,variant:r,className:n="",enableLoader:o=!1,onClick:a,style:l,icon:t,...u})=>{const m=M(v=>{a==null||a(v)},[a]);return x(D,{icon:t,style:l,type:e,variant:r,className:g(["auth-button",n,o?"enableLoader":""]),onClick:m,...u,children:[c("span",{className:"auth-button__text",children:s}),o?c("div",{className:"auth-button__loader-wrapper",children:c("span",{className:"auth-button__loader"})}):null]})},K=e=>{if(!e)return"";const s=e.split("-");if(s.length<3)return"";const[r,n,o]=s;return`${r}-${n.padStart(2,"0")}-${o.padStart(2,"0")}`},U=(e,s)=>{e.forEach(r=>{const n=r.querySelector("input"),o=r.querySelector("textarea"),a=r.querySelector("select");s?r.classList.add("elsie-field__label--disabled"):r.classList.remove("elsie-field__label--disabled"),n&&(n.disabled=s),o&&(o.disabled=s),a&&(a.disabled=s)})},z=({submitCallback:e,isLoading:s,fieldsConfig:r})=>{const n=O({requiredFieldError:"Auth.FormText.requiredFieldError"}),o=A(null),[a,l]=k({}),[t,u]=k({});F(()=>{if(o.current){const f=o.current,i=f.querySelector('button[type="submit"]'),d=f.querySelectorAll(".elsie-field");if(!i||!d)return;const p=s!==void 0?s:!1;U(d,p),p?i.classList.add("loading"):i.classList.remove("loading"),i.disabled=p}},[s]);const m=M(f=>{f.forEach(i=>{if(i.required){switch(i.fieldType){case"DATE":{const d=K(i.defaultValue);l(p=>({...p,[i.name]:d||""}));break}case"BOOLEAN":{const d=i.options.find(E=>E.is_default),p=(d==null?void 0:d.value)==="1";l(E=>({...E,[i.name]:d?p:""}));break}case"SELECT":{const d=i.options.find(p=>p.is_default);l(p=>({...p,[i.name]:(d==null?void 0:d.value)||""}));break}default:l(d=>({...d,[i.name]:(i==null?void 0:i.value)||(i==null?void 0:i.defaultValue)||""}));break}u(d=>({...d,[i.name]:""}))}})},[]);F(()=>{Array.isArray(r)&&(r!=null&&r.length)&&m(r)},[r,m]);const _=M(({target:{name:f,value:i,type:d,checked:p}})=>{const E=d==="checkbox",b=E?p:i,V=t[f]?{...t,[f]:""}:t;l({...a,[f]:b}),u(V)},[t,a]),v=M(f=>{const{name:i,value:d,type:p}=f.target,E=p==="checkbox",b=Object.keys(a).includes(i),V=r.find(T=>T.name===i);!(E?f.target.checked:d.trim())&&b&&V&&V.required&&u({...t,[i]:n.requiredFieldError})},[t,r,a,n.requiredFieldError]),w=M(f=>{var E;f.preventDefault();let i=!0;const d={};Object.keys(a).forEach(b=>{const V=typeof a[b]=="boolean",H=typeof a[b]=="string"&&!a[b].trim();(V&&!a[b]||H)&&(i=!1,d[b]=n.requiredFieldError)}),u(d),e==null||e(f,i);const p=Object.keys(d)[0];(E=document.getElementsByName(p)[0])==null||E.focus()},[a,e,n.requiredFieldError]);return{formData:a,errors:t,formRef:o,handleChange:_,handleBlur:v,handleSubmit:w}},G=e=>h.createElement("svg",{width:30,height:30,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M24.75 10V9.25H23.25V10H24.75ZM23.25 14V14.75H24.75V14H23.25ZM16.75 10V9.25H15.25V10H16.75ZM15.25 14V14.75H16.75V14H15.25ZM10 17.25C9.58579 17.25 9.25 17.5858 9.25 18C9.25 18.4142 9.58579 18.75 10 18.75V17.25ZM30 18.75C30.4142 18.75 30.75 18.4142 30.75 18C30.75 17.5858 30.4142 17.25 30 17.25V18.75ZM12 12.75H28V11.25H12V12.75ZM28 12.75C28.6904 12.75 29.25 13.3096 29.25 14H30.75C30.75 12.4812 29.5188 11.25 28 11.25V12.75ZM29.25 14V28H30.75V14H29.25ZM29.25 28C29.25 28.6904 28.6904 29.25 28 29.25V30.75C29.5188 30.75 30.75 29.5188 30.75 28H29.25ZM28 29.25H12V30.75H28V29.25ZM12 29.25C11.3096 29.25 10.75 28.6904 10.75 28H9.25C9.25 29.5188 10.4812 30.75 12 30.75V29.25ZM10.75 28V14H9.25V28H10.75ZM10.75 14C10.75 13.3096 11.3096 12.75 12 12.75V11.25C10.4812 11.25 9.25 12.4812 9.25 14H10.75ZM23.25 10V14H24.75V10H23.25ZM15.25 10V14H16.75V10H15.25ZM10 18.75H30V17.25H10V18.75Z",fill:"#2B2B2B"})),Q=C(({children:e,name:s="",onChange:r,onBlur:n,errors:o,values:a,label:l})=>{const[t,u]=B("text"),m=o?o[s]:"",_=a?a[s]:"",v=()=>{u("date")},w=f=>{u("text"),n==null||n(f)};return x("div",{className:g(["auth-date-field",t]),children:[c(L,{error:m,children:c(N,{type:t,name:s,value:_,placeholder:l,floatingLabel:l,onFocus:v,onBlur:w,onChange:r})}),e,c(G,{})]})}),Z=()=>{let e="";for(let s=0;s<5;s++)e+=Math.floor(Math.random()*10);return e},S=Z(),Y=({selectTitle:e,optionConfig:s=[],name:r="",onChange:n,onBlur:o,errors:a,values:l})=>{const t=a?a[r]:"",u=l?l[r]:"",m=t?"auth-select-field--error":"";return x("div",{className:g(["auth-select-field","elsie-field",m,u?"auth-select-field--selected":""]),"data-testid":"auth-select-field",children:[x("select",{className:"auth-select-field__select",id:`select_${r}_${S}`,name:r,value:u,onBlur:o,onChange:n,"aria-label":`select_${r}`,children:[c("option",{selected:!!s.filter(v=>v.is_default).length,disabled:!0,children:e}),s.map((v,w)=>c("option",{value:v.value,defaultChecked:v.is_default,children:v.label},w))]}),c("label",{htmlFor:`select_${r}_${S}`,className:"auth-select-field__label",children:e}),c(j,{}),m&&c("div",{className:"auth-select-field__error-text",children:t})]})},$=Z(),ee=({name:e="",errors:s,values:r,label:n,className:o,onChange:a,onBlur:l})=>{const t=s?s[e]:"",u=r?r[e]:"",m=t?"error":"";return x("div",{className:g(["auth-textarea-field",o,m?"auth-textarea-field--error":""]),"data-testid":"auth-textarea-field",children:[c("textarea",{className:"auth-textarea-field__textarea",id:`textarea_${e}_${$}`,placeholder:n,name:e,value:u,onBlur:l,onChange:a}),c("label",{htmlFor:`textarea_${e}_${$}`,className:"auth-textarea-field__label",children:n}),m?c("div",{className:"auth-textarea-field__error-text",children:t}):null]})},y=C(({name:e="",onChange:s,onBlur:r,errors:n,values:o,label:a,className:l})=>{const t=n?n[e]:"",u=o?o[e]:"";return c("div",{className:g(["auth-text-field",l]),"data-testid":"auth-text_field",children:c(L,{error:t,children:c(N,{type:"text",name:e,value:u,onBlur:r,onChange:s,placeholder:a,floatingLabel:a})})})}),te=C(({values:e,fields:s=[],errors:r,className:n="",onChange:o,onBlur:a})=>{if(!s.length)return null;const l=`${n}__item`;return c(I,{children:s.map(t=>{switch(t.fieldType){case"TEXT":if(t.id==="email"){const u=r?r[t.id]:"",m=e?e[t.id]:"";return c("div",{className:g([`${l}`,`${l}--${t.id}`]),"data-testid":`${l}--${t.id}`,children:c(L,{error:u,className:t.className,children:c(N,{type:"email",name:t.id,icon:c(P,{}),value:m,placeholder:t.label,floatingLabel:t.label,onBlur:a,onChange:o})})})}else if(t.id==="firstname"||t.id==="lastname")return c("div",{className:g([`${l}`,`${l}--${t.id}`]),children:c(y,{name:t.id,className:t.className,label:t.label,onBlur:a,errors:r,onChange:o,values:e})});return c("div",{className:g([`${l}`,`${l}--${t.id}`]),children:c(y,{name:t.id,className:t.className,label:t.label,onBlur:a,errors:r,onChange:o,values:e})});case"SELECT":return c("div",{className:l,children:c(Y,{selectTitle:t.label,optionConfig:t.options,name:t.id,onBlur:a,errors:r,onChange:o,values:e})});case"BOOLEAN":return c("div",{className:l,children:c(X,{label:t.label,name:t.id,onBlur:a,errors:r,onChange:o})});case"DATE":return c("div",{className:l,children:c(Q,{label:t.label,name:t.id,onBlur:a,errors:r,onChange:o,values:e})});case"TEXTAREA":return c("div",{className:g([`${l}`,`${l}--${t.id}`]),children:c(ee,{className:t.className,label:t.label,name:t.id,onBlur:a,errors:r,onChange:o,values:e})});default:return null}})})}),he=({name:e,isLoading:s,children:r,className:n="defaultForm",fieldsConfig:o=[],submitCallback:a})=>{const{formData:l,errors:t,formRef:u,handleChange:m,handleBlur:_,handleSubmit:v}=z({submitCallback:a,isLoading:s,fieldsConfig:o});return x("form",{onSubmit:v,className:n,name:e,ref:u,children:[c(te,{fields:o,onChange:m,onBlur:_,errors:t,values:l,className:n}),r]})},me=({children:e,text:s,bottomLine:r=!0,className:n})=>x("div",{className:g(["auth-title",n]),"data-testid":"auth-title_id",children:[x("div",{className:"auth-title__text",children:[c("h1",{className:"auth-title__heading",children:s}),e]}),r?c("div",{className:"auth-title__hr"}):null]}),re={success:c(W,{}),warning:c(R,{}),error:c(J,{})},fe=()=>{const[e,s]=k({}),r=M(n=>{if(!n||!n.type)return;const o=re[n.type];s({...n,icon:o})},[]);return{inLineAlertProps:e,handleSetInLineAlertProps:r}};export{ue as B,X as C,he as F,j as S,me as T,de as c,ie as g,fe as u};
//# sourceMappingURL=useInLineAlert.js.map
