{"version":3,"file":"EmailConfirmationForm.js","sources":["../../src/hooks/components/useEmailConfirmationForm.tsx","../../src/components/EmailConfirmationForm/EmailConfirmationForm.tsx"],"sourcesContent":["import { resendConfirmationEmail } from '@/auth/api';\nimport { useEmailConfirmationFormProps } from '@/auth/types';\nimport { useCallback, useState } from 'preact/hooks';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport const useEmailConfirmationForm = ({\n  userEmail,\n  handleSetInLineAlertProps,\n}: useEmailConfirmationFormProps) => {\n  const translations = useText({\n    emailConfirmationMessage: 'Auth.Notification.emailConfirmationMessage',\n    technicalErrorSendEmail:\n      'Auth.Notification.technicalErrors.technicalErrorSendEmail',\n  });\n\n  const [disabledButton, setDisabledButton] = useState(false);\n\n  const handleEmailConfirmation = useCallback(async () => {\n    setDisabledButton(true);\n\n    if (userEmail) {\n      const response = await resendConfirmationEmail(userEmail);\n\n      if (response) {\n        const errors = response?.errors?.length;\n        const isEmailResend = response?.data?.resendConfirmationEmail;\n\n        if (errors) {\n          handleSetInLineAlertProps({\n            type: 'error',\n            text: translations.technicalErrorSendEmail,\n          });\n        } else {\n          handleSetInLineAlertProps({\n            type: isEmailResend ? 'success' : 'error',\n            text: translations.emailConfirmationMessage,\n          });\n        }\n      }\n    }\n\n    setDisabledButton(false);\n  }, [handleSetInLineAlertProps, translations, userEmail]);\n\n  return { handleEmailConfirmation, disabledButton };\n};\n","import { Button, Title } from '@/auth/components/UI';\nimport { classes } from '@adobe/elsie/lib';\nimport { FunctionComponent } from 'preact';\nimport { InLineAlert } from '@adobe/elsie/components';\nimport '@/auth/components/EmailConfirmationForm/EmailConfirmationForm.css';\nimport { useEmailConfirmationForm } from '@/auth/hooks/components/useEmailConfirmationForm';\nimport { EmailConfirmationFormProps } from '@/auth/types';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport const EmailConfirmationForm: FunctionComponent<\n  EmailConfirmationFormProps\n> = ({\n  formSize,\n  userEmail,\n  inLineAlertProps,\n  hideCloseBtnOnEmailConfirmation,\n  handleSetInLineAlertProps,\n  onPrimaryButtonClick,\n}) => {\n  const translations = useText({\n    title: 'Auth.EmailConfirmationForm.title',\n    subtitle: 'Auth.EmailConfirmationForm.subtitle',\n    mainText: 'Auth.EmailConfirmationForm.mainText',\n    buttonPrimary: 'Auth.EmailConfirmationForm.buttonPrimary',\n    buttonSecondary: 'Auth.EmailConfirmationForm.buttonSecondary',\n  });\n\n  const { handleEmailConfirmation, disabledButton } = useEmailConfirmationForm({\n    userEmail,\n    handleSetInLineAlertProps,\n  });\n\n  return (\n    <div className={classes(['auth-emailConfirmationForm', formSize])}>\n      {inLineAlertProps.text ? (\n        <InLineAlert\n          className=\"auth-signInForm__notification\"\n          type={inLineAlertProps.type}\n          /* \n          TODO - Remove when SDK will be updated\n          https://jira.corp.adobe.com/browse/USF-1240\n          */\n          // @ts-ignore\n          variant=\"secondary\"\n          heading={inLineAlertProps.text}\n          icon={inLineAlertProps.icon}\n          data-testid=\"authInLineAlert\"\n        />\n      ) : null}\n      <Title\n        text={translations.title}\n        bottomLine={false}\n        className=\"auth-emailConfirmationForm__title\"\n      />\n      {userEmail?.length ? (\n        <span className=\"auth-emailConfirmationForm__subtitle\">{`${translations.subtitle} ${userEmail}`}</span>\n      ) : null}\n      <span className=\"auth-emailConfirmationForm__text\">\n        {translations.mainText}\n      </span>\n      <div className=\"auth-emailConfirmationForm-buttons\">\n        <Button\n          type=\"button\"\n          variant=\"tertiary\"\n          style={{ padding: 0 }}\n          buttonText={translations.buttonSecondary}\n          enableLoader={false}\n          onClick={handleEmailConfirmation}\n          disabled={disabledButton}\n        />\n        {hideCloseBtnOnEmailConfirmation ? null : (\n          <Button\n            type=\"submit\"\n            buttonText={translations.buttonPrimary}\n            variant=\"primary\"\n            enableLoader={false}\n            disabled={disabledButton}\n            onClick={onPrimaryButtonClick}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":["useEmailConfirmationForm","userEmail","handleSetInLineAlertProps","translations","useText","emailConfirmationMessage","technicalErrorSendEmail","disabledButton","setDisabledButton","useState","handleEmailConfirmation","useCallback","response","resendConfirmationEmail","errors","length","isEmailResend","data","type","text","EmailConfirmationForm","formSize","inLineAlertProps","hideCloseBtnOnEmailConfirmation","onPrimaryButtonClick","title","subtitle","mainText","buttonPrimary","buttonSecondary","_jsxs","className","classes","children","_jsx","InLineAlert","variant","heading","icon","Title","bottomLine","Button","style","padding","buttonText","enableLoader","onClick","disabled"],"mappings":"gbAKO,MAAMA,EAA2BA,CAAC,CACvCC,UAAAA,EACAC,0BAAAA,CAC6B,IAAM,CACnC,MAAMC,EAAeC,EAAQ,CAC3BC,yBAA0B,6CAC1BC,wBACE,2DAAA,CACH,EAEK,CAACC,EAAgBC,CAAiB,EAAIC,EAAS,EAAK,EA6BnD,MAAA,CAAEC,wBA3BuBC,EAAY,SAAY,SAGtD,GAFAH,EAAkB,EAAI,EAElBP,EAAW,CACPW,MAAAA,EAAW,MAAMC,EAAwBZ,CAAS,EAExD,GAAIW,EAAU,CACNE,MAAAA,GAASF,EAAAA,GAAAA,YAAAA,EAAUE,SAAVF,YAAAA,EAAkBG,OAC3BC,GAAgBJ,EAAAA,GAAAA,YAAAA,EAAUK,OAAVL,YAAAA,EAAgBC,wBAGVX,EADxBY,EACwB,CACxBI,KAAM,QACNC,KAAMhB,EAAaG,uBAAAA,EAGK,CACxBY,KAAMF,EAAgB,UAAY,QAClCG,KAAMhB,EAAaE,wBAAAA,CAJpB,CAOL,CACF,CAEAG,EAAkB,EAAK,CACtB,EAAA,CAACN,EAA2BC,EAAcF,CAAS,CAAC,EAErBM,eAAAA,CAAAA,CACpC,ECpCaa,EAETA,CAAC,CACHC,SAAAA,EACApB,UAAAA,EACAqB,iBAAAA,EACAC,gCAAAA,EACArB,0BAAAA,EACAsB,qBAAAA,CACF,IAAM,CACJ,MAAMrB,EAAeC,EAAQ,CAC3BqB,MAAO,mCACPC,SAAU,sCACVC,SAAU,sCACVC,cAAe,2CACfC,gBAAiB,4CAAA,CAClB,EAEK,CAAEnB,wBAAAA,EAAyBH,eAAAA,GAAmBP,EAAyB,CAC3EC,UAAAA,EACAC,0BAAAA,CAAAA,CACD,EAED,OACE4B,EAAA,MAAA,CAAKC,UAAWC,EAAQ,CAAC,6BAA8BX,CAAQ,CAAC,EAAEY,UAC/DX,EAAiBH,KAChBe,EAACC,EAAW,CACVJ,UAAU,gCACVb,KAAMI,EAAiBJ,KAMvBkB,QAAQ,YACRC,QAASf,EAAiBH,KAC1BmB,KAAMhB,EAAiBgB,KACvB,cAAY,iBAAA,CACb,EACC,KACJJ,EAACK,EAAK,CACJpB,KAAMhB,EAAasB,MACnBe,WAAY,GACZT,UAAU,mCACX,CAAA,EACA9B,GAAAA,MAAAA,EAAWc,OACVmB,EAAA,OAAA,CAAMH,UAAU,uCAAsCE,SAAE,GAAG9B,EAAauB,QAAQ,IAAIzB,CAAS,EAAA,CAAS,EACpG,KACJiC,EAAA,OAAA,CAAMH,UAAU,mCAAkCE,SAC/C9B,EAAawB,QAAAA,CACV,EACNG,EAAA,MAAA,CAAKC,UAAU,qCAAoCE,SAAA,CACjDC,EAACO,EAAM,CACLvB,KAAK,SACLkB,QAAQ,WACRM,MAAO,CAAEC,QAAS,CAAE,EACpBC,WAAYzC,EAAa0B,gBACzBgB,aAAc,GACdC,QAASpC,EACTqC,SAAUxC,CACX,CAAA,EACAgB,EAAkC,KACjCW,EAACO,EAAM,CACLvB,KAAK,SACL0B,WAAYzC,EAAayB,cACzBQ,QAAQ,UACRS,aAAc,GACdE,SAAUxC,EACVuC,QAAStB,CAAAA,CACV,CACF,CAAA,CACE,CAAC,CAAA,CACH,CAET"}